<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Logs | Josherich logs</title>
    <meta name="description" content="Josherich logs">
    <link rel="icon" href="/logs/logo.png">
  <link rel="manifest" href="/logs/manifest.json">
  <meta name="theme-color" content="#fff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/logs/apple-touch-icon.png">
  <link rel="mask-icon" href="/logs/safari-pinned-tab.svg" color="#ff8549">
    
    <link rel="preload" href="/logs/assets/css/0.styles.7ecac9b5.css" as="style"><link rel="preload" href="/logs/assets/js/app.6daaec76.js" as="script"><link rel="preload" href="/logs/assets/js/2.5bcff58d.js" as="script"><link rel="preload" href="/logs/assets/js/6.74772aa1.js" as="script"><link rel="prefetch" href="/logs/assets/js/3.997dc51a.js"><link rel="prefetch" href="/logs/assets/js/4.7715aa49.js"><link rel="prefetch" href="/logs/assets/js/5.abc10fce.js"><link rel="prefetch" href="/logs/assets/js/7.434247c8.js">
    <link rel="stylesheet" href="/logs/assets/css/0.styles.7ecac9b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/logs/" class="home-link router-link-active"><!----> <span class="site-name">Josherich logs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/logs/" class="nav-link">Home</a></div> <a href="https://github.com/josherich/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/logs/" class="nav-link">Home</a></div> <a href="https://github.com/josherich/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Home</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/logs/" class="sidebar-link">Get Started</a></li><li><a href="/logs/logs.html" class="active sidebar-link">Logs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-01" class="sidebar-link">2020-01-01</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-02" class="sidebar-link">2020-01-02</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-03" class="sidebar-link">2020-01-03</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-04" class="sidebar-link">2020-01-04</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-05" class="sidebar-link">2020-01-05</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-06" class="sidebar-link">2020-01-06</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-07" class="sidebar-link">2020-01-07</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-08" class="sidebar-link">2020-01-08</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-10" class="sidebar-link">2020-01-10</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-14" class="sidebar-link">2020-01-14</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-16" class="sidebar-link">2020-01-16</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-20" class="sidebar-link">2020-01-20</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Logs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/logs/logs.html" class="active sidebar-link">Logs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-01" class="sidebar-link">2020-01-01</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#it-takes-a-lot-to-invert-a-binary" class="sidebar-link">It takes a lot to invert a binary</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#beautiful-array-has-a-beatiful-solution" class="sidebar-link">Beautiful array has a beatiful solution</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#array-from-trick-to-implement-range-n" class="sidebar-link">Array from trick to implement range(N)</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#zwitterion" class="sidebar-link">Zwitterion</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#dancing-links" class="sidebar-link">Dancing links</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-02" class="sidebar-link">2020-01-02</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#continuations" class="sidebar-link">continuations</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#private-method-leaks" class="sidebar-link">private method leaks</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#bytecode-peephole-optimization" class="sidebar-link">bytecode peephole optimization</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#codestubassembler" class="sidebar-link">CodeStubAssembler</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-03" class="sidebar-link">2020-01-03</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#matisse-eb" class="sidebar-link">Matisse EB</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#dancing-links-sodoku-polyominoes" class="sidebar-link">dancing links, sodoku, polyominoes</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-04" class="sidebar-link">2020-01-04</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-05" class="sidebar-link">2020-01-05</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-06" class="sidebar-link">2020-01-06</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-07" class="sidebar-link">2020-01-07</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#import-module-e-g-lodash-a-benchmark" class="sidebar-link">import module, e.g. lodash, a benchmark</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#web-perf-wg-2019" class="sidebar-link">web perf WG 2019</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-08" class="sidebar-link">2020-01-08</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#a-tricky-linked-list-broken-keyboard" class="sidebar-link">a tricky linked list, Broken keyboard</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#doubly-linked-list-uva-12657" class="sidebar-link">doubly linked list, UVa 12657</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#uva839-cover-of-clrs" class="sidebar-link">UVa839, cover of CLRS!</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#uva-297-quadtree" class="sidebar-link">UVa 297, quadtree</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#print-subset-binary" class="sidebar-link">print subset binary</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-10" class="sidebar-link">2020-01-10</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-14" class="sidebar-link">2020-01-14</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#ideal-path" class="sidebar-link">ideal path</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#pairs-of-strings-without-common-chars" class="sidebar-link">pairs of strings without common chars</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-16" class="sidebar-link">2020-01-16</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#longest-repeating-character-replacement" class="sidebar-link">longest-repeating-character-replacement</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#label-and-input-association" class="sidebar-link">label and input association</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#animation-overview" class="sidebar-link">animation overview</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#media-query" class="sidebar-link">media query</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#responsive-pattern" class="sidebar-link">responsive pattern</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-20" class="sidebar-link">2020-01-20</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#食物链-poj1182" class="sidebar-link">食物链 POJ1182</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#implement-golang-channel-in-js" class="sidebar-link">implement Golang channel in JS</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_2020-01-01"><a href="#_2020-01-01" class="header-anchor">#</a> 2020-01-01</h2> <h3 id="it-takes-a-lot-to-invert-a-binary"><a href="#it-takes-a-lot-to-invert-a-binary" class="header-anchor">#</a> It takes a lot to invert a binary</h3> <p><a href="https://stackoverflow.com/questions/4338315/inverting-a-binary-value-of-a-number" target="_blank" rel="noopener noreferrer">invert a binary<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">793</span><span class="token punctuation">;</span> <span class="token comment">// input value</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> yl <span class="token operator">=</span> y<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">var</span> mask <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> yl<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// calculate mask</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token operator">~</span>x <span class="token operator">&amp;</span> mask<span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>and you need to handle negative number as negative numbers use 2's complement notation</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">(</span><span class="token operator">~</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="beautiful-array-has-a-beatiful-solution"><a href="#beautiful-array-has-a-beatiful-solution" class="header-anchor">#</a> Beautiful array has a beatiful solution</h3> <p><a href="https://leetcode.com/problems/beautiful-array/discuss/186679/Odd-%2B-Even-Pattern-O(N)" target="_blank" rel="noopener noreferrer">Odd + Even Pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>array a is a permutation of 1...N, for any pair i and j, no i &lt; k &lt; j s.t. a[k] * 2 = a[i] + a[j]</p> <p>start from [1], construct concatenation of odd and even array(if we have equality a[k] * 2 = a[i] + a[j], i,j,k must have at least one odd, or one even number). Multiplication, addition constant and concatenation keep the i,j,k invariant.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>       <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>     <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
<span class="token operator">...</span>
</code></pre></div><h3 id="array-from-trick-to-implement-range-n"><a href="#array-from-trick-to-implement-range-n" class="header-anchor">#</a> Array from trick to implement range(N)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token constant">N</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">let</span> arr<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>length<span class="token operator">:</span><span class="token constant">N</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="zwitterion"><a href="#zwitterion" class="header-anchor">#</a> Zwitterion</h3> <p>the pipeline goes like:
browser fetch resource -&gt; proxy intercept and sent to babel or other transpiler -&gt; babel transile orginal files and send back</p> <p>bundling is just fetch the html</p> <h3 id="dancing-links"><a href="#dancing-links" class="header-anchor">#</a> Dancing links</h3> <h4 id="doubly-linked-list"><a href="#doubly-linked-list" class="header-anchor">#</a> Doubly linked list</h4> <h2 id="_2020-01-02"><a href="#_2020-01-02" class="header-anchor">#</a> 2020-01-02</h2> <h3 id="continuations"><a href="#continuations" class="header-anchor">#</a> continuations</h3> <p>it transforms all code into a state machine and uses exceptions to save the state of all functions on the stack. This means that every function is transformed into a big switch statement with every expression as separate cases, giving us the ability to arbitrarily jump around.</p> <p>wiki says:
an abstract representation of the control state of a computer program. A continuation reifies the program control state…</p> <p>call/cc:  call-with-current-continuation</p> <h3 id="private-method-leaks"><a href="#private-method-leaks" class="header-anchor">#</a> private method leaks</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">somePublicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'public api called.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">privateFuncOne</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'secret one called.'</span><span class="token punctuation">)</span>
    <span class="token function">somePublicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> <span class="token function-variable function">privateFuncTwo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'secret two called.'</span><span class="token punctuation">)</span>
    <span class="token function">privateFuncOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  window<span class="token punctuation">.</span><span class="token function-variable function">exportFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">privateFuncTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> privateFuncOne<span class="token punctuation">,</span> privateFuncTwo
<span class="token function-variable function">somePublicApi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  privateFuncOne <span class="token operator">=</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>caller<span class="token punctuation">;</span>
  privateFuncTwo <span class="token operator">=</span> privateFuncOne<span class="token punctuation">.</span>caller<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">exportFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>privateFuncOne<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>privateFuncTwo<span class="token punctuation">)</span>
</code></pre></div><h3 id="bytecode-peephole-optimization"><a href="#bytecode-peephole-optimization" class="header-anchor">#</a> bytecode peephole optimization</h3> <p>count regexp usage, if 'hot', compile it to native code</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex">/[^_]*/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'a0b*c_ef'</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// → matches 'a0b*c'</span>
</code></pre></div><ol><li>Load current character.</li> <li>Check if character equals '_'.</li> <li>If not, advance current position in the subject string and goto 1.</li></ol> <p>replace sequences of bytecodes with a new optimized bytecode that combines the functionality of multiple bytecodes</p> <p>can even handle the implicit loop created by the goto explicitly in the new bytecode, thus a single bytecode handles all matching characters, saving 16 dispatches.</p> <h3 id="codestubassembler"><a href="#codestubassembler" class="header-anchor">#</a> CodeStubAssembler</h3> <p><img src="https://v8.dev/_img/csa/csa.svg" alt=""></p> <ul><li><p>builtins and hand-written assembly in V8</p></li> <li><p>type verificatio at IR(turboFan) level</p></li> <li><p>byte code peephole opt:</p> <ul><li>replace sequences of bytecodes with a new optimized bytecode that combines the functionality of multiple bytecodes</li></ul></li> <li><p>JIT-less V8 ( --jitless )</p> <ul><li>allocating executable memory at runtime
<ul><li>turboFan create native code for hot js functions, need to allocate memory at runtime, fast. but</li> <li>some disallow write to memory, and disallow write reduce exploit risk</li></ul></li></ul></li> <li><p><a href="https://v8.dev/docs/turbofan" target="_blank" rel="noopener noreferrer">turboFan<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> JIT implementation</p> <ul><li><a href="https://darksi.de/d.sea-of-nodes/" target="_blank" rel="noopener noreferrer">sea of nodes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> IR allow more reording
<ul><li>AST to data-flow graph</li> <li>and convert to SSA, remove control dependency, compiler is free to move them</li> <li>control flow graph, group nodes to blocks</li> <li>reduction
<ul><li>compute int range</li> <li>compute limits</li> <li>apply range and limits to decide length check is unnecessary</li> <li>move code(arr.length) out of loop</li></ul></li></ul></li></ul></li> <li><p><a href="https://v8.dev/blog/ignition-interpreter" target="_blank" rel="noopener noreferrer">ignition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> interpreter</p></li></ul> <p><img src="https://v8.dev/_img/ignition-interpreter/ignition-pipeline.png" alt=""></p> <h2 id="_2020-01-03"><a href="#_2020-01-03" class="header-anchor">#</a> 2020-01-03</h2> <h3 id="matisse-eb"><a href="#matisse-eb" class="header-anchor">#</a> Matisse EB</h3> <p><a href="https://thetype.com/2019/12/17434/" target="_blank" rel="noopener noreferrer">末世感叩击：《新世纪福音战士》的文字世界<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="https://thetype.com/wp-content/uploads/2019/11/06_95tv_allep_titlecard.gif" alt="片头"></p> <p>机械拉伸的特殊质感</p> <h3 id="dancing-links-sodoku-polyominoes"><a href="#dancing-links-sodoku-polyominoes" class="header-anchor">#</a> dancing links, sodoku, polyominoes</h3> <p>exact cover problem</p> <h2 id="_2020-01-04"><a href="#_2020-01-04" class="header-anchor">#</a> 2020-01-04</h2> <p>Rust-lang</p> <p>ClojureScript</p> <p>streaming algorithm</p> <p>string search algorithm</p> <ul><li><p>DFA, powerset construction</p></li> <li><p>Knuth–Morris–Pratt computes a DFA that recognizes inputs with the string to search for as a suffix</p></li> <li><p>Boyer–Moore starts searching from the end of the needle, so it can usually jump ahead a whole needle-length at each step</p></li> <li><p>Baeza–Yates(Bitap) keeps track of whether the previous j characters were a prefix of the search string, and is therefore adaptable to fuzzy string searching</p></li></ul> <h2 id="_2020-01-05"><a href="#_2020-01-05" class="header-anchor">#</a> 2020-01-05</h2> <p>Babel plugin system</p> <p>Babel way: tokenizer, transform, codegen
visitor</p> <h2 id="_2020-01-06"><a href="#_2020-01-06" class="header-anchor">#</a> 2020-01-06</h2> <p>max flow</p> <h2 id="_2020-01-07"><a href="#_2020-01-07" class="header-anchor">#</a> 2020-01-07</h2> <h3 id="import-module-e-g-lodash-a-benchmark"><a href="#import-module-e-g-lodash-a-benchmark" class="header-anchor">#</a> <a href="https://www.blazemeter.com/blog/the-correct-way-to-import-lodash-libraries-a-benchmark/" target="_blank" rel="noopener noreferrer">import module, e.g. lodash, a benchmark<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li>The smallest bundle size could also be reached by using the babel-plugin-lodash together with lodash-webpack-plugin for cherry-picking only the used functions.</li></ul> <h3 id="web-perf-wg-2019"><a href="#web-perf-wg-2019" class="header-anchor">#</a> <a href="https://blog.yoav.ws/webperfwg_f2f_2019/" target="_blank" rel="noopener noreferrer">web perf WG 2019<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li>SPA metrics, ways to measure soft navigation</li> <li><a href="https://docs.google.com/presentation/d/1GUB081FTpvFEwEkfePagFEkiqcLKKnIHkhym-I8tTd8/edit#slide=id.g5b43bd1ecf_1_928" target="_blank" rel="noopener noreferrer">scheduling api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.google.com/document/d/10vO0eRqLjY6SSWNurVwW_pf8g0hg1e63OUoxiEQDZiQ/edit#" target="_blank" rel="noopener noreferrer">CPU reporting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/ulan/javascript-agent-memory/blob/master/explainer.md" target="_blank" rel="noopener noreferrer">memory api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="_2020-01-08"><a href="#_2020-01-08" class="header-anchor">#</a> 2020-01-08</h2> <h3 id="a-tricky-linked-list-broken-keyboard"><a href="#a-tricky-linked-list-broken-keyboard" class="header-anchor">#</a> a tricky linked list, <a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=3139" target="_blank" rel="noopener noreferrer">Broken keyboard<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> scase <span class="token operator">=</span> <span class="token string">&quot;This_is_a_[Beiju]_text&quot;</span>

<span class="token keyword">function</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  s <span class="token operator">=</span> <span class="token string">' '</span><span class="token operator">+</span>s
   <span class="token keyword">const</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span>length
   <span class="token keyword">let</span> last <span class="token operator">=</span> cur <span class="token operator">=</span> <span class="token number">0</span>
   <span class="token keyword">let</span> next <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
   next<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;[&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cur <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cur <span class="token operator">=</span> last
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      next<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> next<span class="token punctuation">[</span>cur<span class="token punctuation">]</span>
      next<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">=</span> i
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">next[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">] = next[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cur<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">next[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cur<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">] = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">===</span> last<span class="token punctuation">)</span> last <span class="token operator">=</span> i<span class="token punctuation">;</span>
      cur <span class="token operator">=</span> i
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> next<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">=</span> next<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// res.push(`${s[i]}:${i} `)</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">solve</span><span class="token punctuation">(</span>scase<span class="token punctuation">)</span>
</code></pre></div><h3 id="doubly-linked-list-uva-12657"><a href="#doubly-linked-list-uva-12657" class="header-anchor">#</a> doubly linked list, UVa 12657</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">link</span><span class="token punctuation">(</span><span class="token parameter">l<span class="token punctuation">,</span> r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  right<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> r
  left<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">=</span> l
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> cmds</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">-</span><span class="token number">1</span>
    right<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
  left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> n

  <span class="token keyword">let</span> m <span class="token operator">=</span> cmds<span class="token punctuation">.</span>length<span class="token punctuation">,</span> inv <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>op<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> cmds<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> inv <span class="token operator">=</span> <span class="token operator">!</span>inv<span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">!==</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> inv<span class="token punctuation">)</span> op <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">-</span> op<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">==</span> left<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">=</span> right<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> lx <span class="token operator">=</span> left<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> rx <span class="token operator">=</span> right<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> ly <span class="token operator">=</span> left<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> ry <span class="token operator">=</span> right<span class="token punctuation">[</span>y<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>


  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    b <span class="token operator">=</span> right<span class="token punctuation">[</span>b<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> ans <span class="token operator">+=</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>inv <span class="token operator">&amp;&amp;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ans <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> ans <span class="token comment">// flip odd and even</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> ans
<span class="token punctuation">}</span>
</code></pre></div><h3 id="uva839-cover-of-clrs"><a href="#uva839-cover-of-clrs" class="header-anchor">#</a> UVa839, cover of CLRS!</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">function</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token parameter">ws</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>w1<span class="token punctuation">,</span> d1<span class="token punctuation">,</span> w2<span class="token punctuation">,</span> d2<span class="token punctuation">]</span> <span class="token operator">=</span> ws<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

  i<span class="token operator">++</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> ws<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>

  <span class="token keyword">let</span> b1 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> b2 <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>w1<span class="token punctuation">)</span> <span class="token punctuation">[</span>b1<span class="token punctuation">,</span> w1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>w2<span class="token punctuation">)</span> <span class="token punctuation">[</span>b2<span class="token punctuation">,</span> w2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>b1 <span class="token operator">&amp;&amp;</span> b2 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>w1 <span class="token operator">*</span> d1 <span class="token operator">===</span> w2 <span class="token operator">*</span> d2<span class="token punctuation">)</span><span class="token punctuation">,</span> w1 <span class="token operator">+</span> w2<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">ws</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> w<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="uva-297-quadtree"><a href="#uva-297-quadtree" class="header-anchor">#</a> UVa 297, <a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=233" target="_blank" rel="noopener noreferrer">quadtree<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="print-subset-binary"><a href="#print-subset-binary" class="header-anchor">#</a> print subset binary</h3> <div class="language-js extra-class"><pre class="language-js"><code>n <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">function</span> <span class="token function">print_subset</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print_subset</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-01-10"><a href="#_2020-01-10" class="header-anchor">#</a> 2020-01-10</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#! /usr/bin/env bash</span>
<span class="token builtin class-name">set</span> -euo pipefail
<span class="token comment"># -e ensure stops on first command failure</span>
<span class="token comment"># -u ensure stops on first unset variable, otherwise replace it with empty def values</span>
<span class="token comment"># -o pipefail if any fail in pipeline, overall exit status is the one that fails</span>
</code></pre></div><h2 id="_2020-01-14"><a href="#_2020-01-14" class="header-anchor">#</a> 2020-01-14</h2> <h3 id="ideal-path"><a href="#ideal-path" class="header-anchor">#</a> <a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=4474" target="_blank" rel="noopener noreferrer">ideal path<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>https://github.com/aoapc-book/aoapc-bac2nd/blob/master/ch6/UVa1599.cpp</p> <h3 id="pairs-of-strings-without-common-chars"><a href="#pairs-of-strings-without-common-chars" class="header-anchor">#</a> <a href="https://www.quora.com/Given-a-dictionary-of-words-how-can-we-efficiently-find-a-pair-words-if-they-dont-have-characters-in-common-and-the-sum-of-their-length-is-the-maximum" target="_blank" rel="noopener noreferrer">pairs of strings without common chars<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Our algorithm will consist of three steps:</p> <ol><li>For each set S of letters, find the longest word that consists of exactly those letters.</li> <li>For each set S of letters, find the longest word that consists of at most those letters (i.e., some letters may be unused, but you cannot use a letter that does not belong to S).</li> <li>For each word w, compute length(w) + length(longest word out of letters not in w) and pick the maximum.</li></ol> <p>Step 1 is easy: just take an array of size 2𝑎, then read the input, and for each word update the corresponding cell. This can be done in 𝑂(ℓ𝑛).</p> <p>Step 2 can be done using dynamic programming. We process the subsets of our alphabet in the order 0, 1, ..., 2𝑎−1. (Note that this  order that has the property that for any set S, all subsets of S are processed before S.) For each set of letters S, the best word for S is either the best word made out of exactly these letters (this we computed in phase 1), or at least one letter is unused. We try all possibilities for the unused letter and pick the best one. All of this takes 𝑂(𝑎2𝑎) time.</p> <p>Step 3 is again easy. If we stored the set of letters for each word in step 1, step 3 can now be done in 𝑂(𝑛) time. Hence the overall time complexity is 𝑂(ℓ𝑛+𝑎2𝑎).</p> <h2 id="_2020-01-16"><a href="#_2020-01-16" class="header-anchor">#</a> 2020-01-16</h2> <h3 id="longest-repeating-character-replacement"><a href="#longest-repeating-character-replacement" class="header-anchor">#</a> longest-repeating-character-replacement</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">longestRepeat</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> end <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> end<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we only need to know the length of most frequent char</span>
    maxCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxCount<span class="token punctuation">,</span> <span class="token operator">++</span>count<span class="token punctuation">[</span>s<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> maxCount <span class="token operator">&gt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">[</span>s<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span>
      start<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxLen<span class="token punctuation">,</span> end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> maxLen
<span class="token punctuation">}</span>
</code></pre></div><h3 id="label-and-input-association"><a href="#label-and-input-association" class="header-anchor">#</a> label and input association</h3> <p>When a <code>&lt;label&gt;</code> is clicked or tapped and it is associated with a form control, the resulting click event is also raised for the associated control.</p> <h3 id="animation-overview"><a href="#animation-overview" class="header-anchor">#</a> animation overview</h3> <p>box-shadow
width
event 'transitionend'
Web Animations API</p> <p>transition: transform 500ms ease-out;
transition: transform 500ms cubic-bezier(0.465, 0.183, 0.153, 0.946);</p> <p>Ensure that any animating element has will-change set for anything you plan to change well ahead of the animation starting. For view transitions, it’s highly likely you will want to use will-change: transform.</p> <p>UI trigger by user: quick intro, slow outro
display as quick as 100ms, view out as quick as 300ms</p> <p>UI trigger by code(err, modal): slow intro, quick outro</p> <p>CSS-based animations, and Web Animations where supported natively, are typically handled on a thread known as the &quot;compositor thread&quot;</p> <p>Include initial-scale=1 to establish a 1:1 relationship between CSS pixels and device-independent pixels.</p> <h3 id="media-query"><a href="#media-query" class="header-anchor">#</a> media query</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width: 640px)&quot; href=&quot;max-640px.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(min-width: 640px)&quot; href=&quot;min-640px.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(orientation: portrait)&quot; href=&quot;portrait.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(orientation: landscape)&quot; href=&quot;landscape.css&quot;&gt;
&lt;style&gt;
  @media (min-width: 500px) and (max-width: 600px) {
    h1 {
      color: fuchsia;
    }

    .desc:after {
      content:&quot; In fact, it's between 500px and 600px wide.&quot;;
    }
  }
&lt;/style&gt;
</code></pre></div><ul><li>don't use <code>min-device-width</code></li></ul> <p>min-width is based on the size of the browser window whereas min-device-width is based on the size of the screen. Unfortunately some browsers, including the legacy Android browser, don't report the device width properly; they report the screen size in device pixels instead of the expected viewport width.</p> <p>In addition, using min-device-width can prevent content from adapting on desktops or other devices that allow windows to be resized because the query is based on the actual device size, not the size of the browser window.</p> <ul><li><p>setting width: 100% on a top level div, ensures that it spans the width of the viewport and is never too big or too small for the viewport.</p></li> <li><p>Classic readability theory suggests that an ideal column should contain 70 to 80 characters per line (about 8 to 10 words in English)</p></li></ul> <h3 id="responsive-pattern"><a href="#responsive-pattern" class="header-anchor">#</a> <a href="https://developers.google.com/web/fundamentals/design-and-ux/responsive/patterns" target="_blank" rel="noopener noreferrer">responsive pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h2 id="_2020-01-20"><a href="#_2020-01-20" class="header-anchor">#</a> 2020-01-20</h2> <h3 id="食物链-poj1182"><a href="#食物链-poj1182" class="header-anchor">#</a> <a href="http://poj.org/problem?id=1182" target="_blank" rel="noopener noreferrer">食物链 POJ1182<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>K pieces of information, either:</p> <p>type 1: x, y belong to the same category
type 2: x eats y</p> <p>solve:</p> <p>i[xyz]-m[ABC]: animal i belongs to category m</p> <p>type 1: union x-A and y-A, x-B and y-B
type 2: union x-A and y-B, x-B and y-C, and x-C and y-A</p> <h3 id="implement-golang-channel-in-js"><a href="#implement-golang-channel-in-js" class="header-anchor">#</a> implement Golang channel in JS</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
&lt;h1&gt;Hello Vanilla!&lt;/h1&gt;
&lt;div&gt;
  We use Parcel to bundle this sandbox, you can find more info about Parcel
  &lt;a href=&quot;https://parceljs.org&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;here&lt;/a&gt;.
&lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> jchan <span class="token operator">=</span> <span class="token function">Chan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

js <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token string">'hey'</span>
  jchan <span class="token operator">&lt;</span><span class="token operator">-</span> k
<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

jchan<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// =============</span>

<span class="token keyword">const</span> gresolve <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">var</span> jchan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  gresovle <span class="token operator">=</span> resolve
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// vvvvvvvvvvvvv worker.js</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">&quot;https://unpkg.com/comlink/dist/umd/comlink.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// importScripts(&quot;../../../dist/umd/comlink.js&quot;);</span>

<span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token string">'hey'</span>

Comlink<span class="token punctuation">.</span><span class="token function">expose</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ^^^^^^^^^^^^^</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&quot;worker.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// WebWorkers use `postMessage` and therefore work with Comlink.</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Comlink<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>worker<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token comment">// vvvvvvvvvvvvv or async</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token string">'hey'</span>
  <span class="token function">gresolve</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ^^^^^^^^^^^^^</span>

jchan<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/josherich/blog/edit/master/logs/logs.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/logs/" class="prev router-link-active">Get Started</a></span> <span class="next"><a href="/logs/logs.html" class="router-link-exact-active router-link-active">Logs</a>
      →
    </span></p></div> </main></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup><!----></div></div>
    <script src="/logs/assets/js/app.6daaec76.js" defer></script><script src="/logs/assets/js/2.5bcff58d.js" defer></script><script src="/logs/assets/js/6.74772aa1.js" defer></script>
  </body>
</html>
