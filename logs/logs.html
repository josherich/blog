<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Logs | Josherich logs</title>
    <meta name="description" content="Josherich logs">
    <link rel="icon" href="/logs/logo.png">
  <link rel="manifest" href="/logs/manifest.json">
  <meta name="theme-color" content="#fff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="/logs/apple-touch-icon.png">
  <link rel="mask-icon" href="/logs/safari-pinned-tab.svg" color="#ff8549">
    
    <link rel="preload" href="/logs/assets/css/0.styles.7191ec3a.css" as="style"><link rel="preload" href="/logs/assets/js/app.5cc72574.js" as="script"><link rel="preload" href="/logs/assets/js/2.a50b14f1.js" as="script"><link rel="preload" href="/logs/assets/js/18.0ae10052.js" as="script"><link rel="prefetch" href="/logs/assets/js/10.d006e7a8.js"><link rel="prefetch" href="/logs/assets/js/11.d5266bb7.js"><link rel="prefetch" href="/logs/assets/js/12.ae6403cd.js"><link rel="prefetch" href="/logs/assets/js/13.5faee3eb.js"><link rel="prefetch" href="/logs/assets/js/14.ca21d440.js"><link rel="prefetch" href="/logs/assets/js/15.8ccfa7a9.js"><link rel="prefetch" href="/logs/assets/js/16.0254efc1.js"><link rel="prefetch" href="/logs/assets/js/17.e177a4da.js"><link rel="prefetch" href="/logs/assets/js/19.0a4d2d26.js"><link rel="prefetch" href="/logs/assets/js/20.c4bcf208.js"><link rel="prefetch" href="/logs/assets/js/21.cf14781b.js"><link rel="prefetch" href="/logs/assets/js/22.d66a1538.js"><link rel="prefetch" href="/logs/assets/js/23.c2b61054.js"><link rel="prefetch" href="/logs/assets/js/24.cf84dda2.js"><link rel="prefetch" href="/logs/assets/js/25.87d554d9.js"><link rel="prefetch" href="/logs/assets/js/26.98393859.js"><link rel="prefetch" href="/logs/assets/js/27.9c56208f.js"><link rel="prefetch" href="/logs/assets/js/28.2b361e5f.js"><link rel="prefetch" href="/logs/assets/js/3.e79b47f3.js"><link rel="prefetch" href="/logs/assets/js/4.7001d9bb.js"><link rel="prefetch" href="/logs/assets/js/5.cf7ef866.js"><link rel="prefetch" href="/logs/assets/js/6.d8e82984.js"><link rel="prefetch" href="/logs/assets/js/7.99d61cc4.js"><link rel="prefetch" href="/logs/assets/js/8.cbf45634.js"><link rel="prefetch" href="/logs/assets/js/9.9decd2f2.js">
    <link rel="stylesheet" href="/logs/assets/css/0.styles.7191ec3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/logs/" class="home-link router-link-active"><!----> <span class="site-name">Josherich logs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/logs/" class="nav-link">Home</a></div> <a href="https://github.com/josherich/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/logs/" class="nav-link">Home</a></div> <a href="https://github.com/josherich/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Home</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/logs/" class="sidebar-link">Get Started</a></li><li><a href="/logs/logs.html" class="active sidebar-link">Logs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-01" class="sidebar-link">2020-01-01</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-02" class="sidebar-link">2020-01-02</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-03" class="sidebar-link">2020-01-03</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-04" class="sidebar-link">2020-01-04</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-05" class="sidebar-link">2020-01-05</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-06" class="sidebar-link">2020-01-06</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-07" class="sidebar-link">2020-01-07</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-08" class="sidebar-link">2020-01-08</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-10" class="sidebar-link">2020-01-10</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-14" class="sidebar-link">2020-01-14</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-16" class="sidebar-link">2020-01-16</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-20" class="sidebar-link">2020-01-20</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-22" class="sidebar-link">2020-01-22</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-24" class="sidebar-link">2020-01-24</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-25" class="sidebar-link">2020-01-25</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-26" class="sidebar-link">2020-01-26</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-27" class="sidebar-link">2020-01-27</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-28" class="sidebar-link">2020-01-28</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-29" class="sidebar-link">2020-01-29</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-30" class="sidebar-link">2020-01-30</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-02" class="sidebar-link">2020-02-02</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-04" class="sidebar-link">2020-02-04</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-25" class="sidebar-link">2020-02-25</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-26" class="sidebar-link">2020-02-26</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-28" class="sidebar-link">2020-02-28</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-07" class="sidebar-link">2020-03-07</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-08" class="sidebar-link">2020-03-08</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-10" class="sidebar-link">2020-03-10</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-13" class="sidebar-link">2020-03-13</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-14" class="sidebar-link">2020-03-14</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#todo" class="sidebar-link">TODO</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Logs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/logs/logs.html" class="active sidebar-link">Logs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-01" class="sidebar-link">2020-01-01</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#it-takes-a-lot-to-invert-a-binary" class="sidebar-link">It takes a lot to invert a binary</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#beautiful-array-has-a-beatiful-solution" class="sidebar-link">Beautiful array has a beatiful solution</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#array-from-trick-to-implement-range-n" class="sidebar-link">Array from trick to implement range(N)</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#zwitterion" class="sidebar-link">Zwitterion</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#dancing-links" class="sidebar-link">Dancing links</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-02" class="sidebar-link">2020-01-02</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#continuations" class="sidebar-link">continuations</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#private-method-leaks" class="sidebar-link">private method leaks</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#bytecode-peephole-optimization" class="sidebar-link">bytecode peephole optimization</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#codestubassembler" class="sidebar-link">CodeStubAssembler</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-03" class="sidebar-link">2020-01-03</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#matisse-eb" class="sidebar-link">Matisse EB</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#dancing-links-sodoku-polyominoes" class="sidebar-link">dancing links, sodoku, polyominoes</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-04" class="sidebar-link">2020-01-04</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-05" class="sidebar-link">2020-01-05</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-06" class="sidebar-link">2020-01-06</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-07" class="sidebar-link">2020-01-07</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#import-module-e-g-lodash-a-benchmark" class="sidebar-link">import module, e.g. lodash, a benchmark</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#web-perf-wg-2019" class="sidebar-link">web perf WG 2019</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-08" class="sidebar-link">2020-01-08</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#a-tricky-linked-list-broken-keyboard" class="sidebar-link">a tricky linked list, Broken keyboard</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#doubly-linked-list-uva-12657" class="sidebar-link">doubly linked list, UVa 12657</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#uva839-cover-of-clrs" class="sidebar-link">UVa839, cover of CLRS!</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#uva-297-quadtree" class="sidebar-link">UVa 297, quadtree</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#print-subset-binary" class="sidebar-link">print subset binary</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-10" class="sidebar-link">2020-01-10</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-14" class="sidebar-link">2020-01-14</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#ideal-path" class="sidebar-link">ideal path</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#pairs-of-strings-without-common-chars" class="sidebar-link">pairs of strings without common chars</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-16" class="sidebar-link">2020-01-16</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#longest-repeating-character-replacement" class="sidebar-link">longest-repeating-character-replacement</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#label-and-input-association" class="sidebar-link">label and input association</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#animation-overview" class="sidebar-link">animation overview</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#media-query" class="sidebar-link">media query</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#responsive-pattern" class="sidebar-link">responsive pattern</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-20" class="sidebar-link">2020-01-20</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#食物链-poj1182" class="sidebar-link">食物链 POJ1182</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#subfolders-to-subdomain" class="sidebar-link">subfolders to subdomain</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#rails-code-stats" class="sidebar-link">Rails code stats</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#compressing-tries-prefix-trees" class="sidebar-link">Compressing tries(prefix trees)</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#tighyly-packed-tries" class="sidebar-link">tighyly packed tries</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#github-actions" class="sidebar-link">Github Actions</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-22" class="sidebar-link">2020-01-22</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#knight-s-shortest-path-on-chessboard" class="sidebar-link">Knight's Shortest Path on Chessboard</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#text-editor-implementation" class="sidebar-link">text editor implementation</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#aoapc-solution" class="sidebar-link">aoapc solution</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#suffix-tree" class="sidebar-link">suffix tree</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-24" class="sidebar-link">2020-01-24</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#heuristics-and-observations-of-teams-resolving-internet-service-outages" class="sidebar-link">heuristics and observations of teams resolving internet service outages</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-25" class="sidebar-link">2020-01-25</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#inline-defer-in-golang" class="sidebar-link">inline defer in Golang</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-26" class="sidebar-link">2020-01-26</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#deep-copy-using-structral-clone" class="sidebar-link">deep copy using structral clone</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#deep-copy-using-messagechannel" class="sidebar-link">deep copy using MessageChannel</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#postmessage-perf" class="sidebar-link">postMessage perf</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-27" class="sidebar-link">2020-01-27</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#ocaml-signature" class="sidebar-link">Ocaml signature</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-28" class="sidebar-link">2020-01-28</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#conditional-mutual-information" class="sidebar-link">Conditional Mutual Information</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#schrodinger-problem-and-connection-with-optimal-transport" class="sidebar-link">Schrodinger problem and connection with optimal transport</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#gradient-surgery-for-multi-task-learning" class="sidebar-link">Gradient Surgery for Multi-Task Learning</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#multilingual-denoising-pre-training-for-neural-machine-translation" class="sidebar-link">Multilingual Denoising Pre-training for Neural Machine Translation</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#the-nonstochastic-control-problem" class="sidebar-link">The Nonstochastic Control Problem</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-29" class="sidebar-link">2020-01-29</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#sync-task" class="sidebar-link">sync task</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#language-server-protocol" class="sidebar-link">Language Server Protocol</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-01-30" class="sidebar-link">2020-01-30</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#normalization-of-deviance" class="sidebar-link">Normalization of deviance</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#simd-in-wasm" class="sidebar-link">SIMD in WASM</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#wasm" class="sidebar-link">WASM</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-02" class="sidebar-link">2020-02-02</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#rust" class="sidebar-link">Rust</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-04" class="sidebar-link">2020-02-04</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#opslang" class="sidebar-link">opslang</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#g-style-guide" class="sidebar-link">G style guide</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-25" class="sidebar-link">2020-02-25</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-26" class="sidebar-link">2020-02-26</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#editorconfig" class="sidebar-link">EditorConfig</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-02-28" class="sidebar-link">2020-02-28</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#top-k-freq-word" class="sidebar-link">top k freq word</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#find-the-top-k-pairs-of-words-and-print-the-levenshtein-distance-between-each-pair" class="sidebar-link">find the top K pairs of words and print the Levenshtein distance between each pair</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-07" class="sidebar-link">2020-03-07</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-08" class="sidebar-link">2020-03-08</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#awk" class="sidebar-link">awk</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#git-blame" class="sidebar-link">git blame</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#xargs" class="sidebar-link">xargs</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#china-brith-rate" class="sidebar-link">China brith rate</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#all-you-can-eat-economy" class="sidebar-link">all you can eat economy</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#will-coronavirus-harm-trump-s-reelection" class="sidebar-link">will coronavirus harm Trump's reelection</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#git-undoing" class="sidebar-link">git undoing</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#抵挡遗忘" class="sidebar-link">抵挡遗忘</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-10" class="sidebar-link">2020-03-10</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#西州回鹘" class="sidebar-link">西州回鹘</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#ericraymond" class="sidebar-link">EricRaymond</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#automl-zero" class="sidebar-link">autoML zero</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#git-hooks" class="sidebar-link">Git hooks</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-13" class="sidebar-link">2020-03-13</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#british-government-s-strategy" class="sidebar-link">British government's strategy</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#camus-鼠疫" class="sidebar-link">Camus 鼠疫</a></li><li class="sidebar-sub-header"><a href="/logs/logs.html#bamboo-ceiling" class="sidebar-link">Bamboo ceiling</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#_2020-03-14" class="sidebar-link">2020-03-14</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#advanced-python" class="sidebar-link">Advanced Python</a></li></ul></li><li class="sidebar-sub-header"><a href="/logs/logs.html#todo" class="sidebar-link">TODO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logs/logs.html#implement-golang-channel-in-js" class="sidebar-link">implement Golang channel in JS</a></li></ul></li></ul></li><li><a href="/logs/cloud.html" class="sidebar-link">cloud</a></li><li><a href="/logs/cpp.html" class="sidebar-link">CPP</a></li><li><a href="/logs/cs.html" class="sidebar-link">CS</a></li><li><a href="/logs/database.html" class="sidebar-link">Database</a></li><li><a href="/logs/draw.html" class="sidebar-link">Draw</a></li><li><a href="/logs/frontend.html" class="sidebar-link">Front end</a></li><li><a href="/logs/gaming.html" class="sidebar-link">Books</a></li><li><a href="/logs/josherich.html" class="sidebar-link">Josherich</a></li><li><a href="/logs/languages.html" class="sidebar-link">Language</a></li><li><a href="/logs/math.html" class="sidebar-link">Math</a></li><li><a href="/logs/ml.html" class="sidebar-link">Machine Learning</a></li><li><a href="/logs/nlp.html" class="sidebar-link">NLP</a></li><li><a href="/logs/numpy.html" class="sidebar-link">Numpy</a></li><li><a href="/logs/ops.html" class="sidebar-link">Ops</a></li><li><a href="/logs/os.html" class="sidebar-link">OS</a></li><li><a href="/logs/papernotes.html" class="sidebar-link">paper reading notes</a></li><li><a href="/logs/pl.html" class="sidebar-link">PL</a></li><li><a href="/logs/R.html" class="sidebar-link">R</a></li><li><a href="/logs/RL.html" class="sidebar-link">Reinforcement Learning</a></li><li><a href="/logs/social.html" class="sidebar-link">Social</a></li><li><a href="/logs/vision.html" class="sidebar-link">Vision</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_2020-01-01"><a href="#_2020-01-01" class="header-anchor">#</a> 2020-01-01</h2> <h3 id="it-takes-a-lot-to-invert-a-binary"><a href="#it-takes-a-lot-to-invert-a-binary" class="header-anchor">#</a> It takes a lot to invert a binary</h3> <p><a href="https://stackoverflow.com/questions/4338315/inverting-a-binary-value-of-a-number" target="_blank" rel="noopener noreferrer">invert a binary<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">793</span><span class="token punctuation">;</span> <span class="token comment">// input value</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> yl <span class="token operator">=</span> y<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">var</span> mask <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> yl<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// calculate mask</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token operator">~</span>x <span class="token operator">&amp;</span> mask<span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>and you need to handle negative number as negative numbers use 2's complement notation</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">(</span><span class="token operator">~</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="beautiful-array-has-a-beatiful-solution"><a href="#beautiful-array-has-a-beatiful-solution" class="header-anchor">#</a> Beautiful array has a beatiful solution</h3> <p><a href="https://leetcode.com/problems/beautiful-array/discuss/186679/Odd-%2B-Even-Pattern-O(N)" target="_blank" rel="noopener noreferrer">Odd + Even Pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>array a is a permutation of 1...N, for any pair i and j, no i &lt; k &lt; j s.t. a[k] * 2 = a[i] + a[j]</p> <p>start from [1], construct concatenation of odd and even array(if we have equality a[k] * 2 = a[i] + a[j], i,j,k must have at least one odd, or one even number). Multiplication, addition constant and concatenation keep the i,j,k invariant.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>       <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>     <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
<span class="token operator">...</span>
</code></pre></div><h3 id="array-from-trick-to-implement-range-n"><a href="#array-from-trick-to-implement-range-n" class="header-anchor">#</a> Array from trick to implement range(N)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token constant">N</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">let</span> arr<span class="token operator">=</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>length<span class="token operator">:</span><span class="token constant">N</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="zwitterion"><a href="#zwitterion" class="header-anchor">#</a> Zwitterion</h3> <p>the pipeline goes like:
browser fetch resource -&gt; proxy intercept and sent to babel or other transpiler -&gt; babel transile orginal files and send back</p> <p>bundling is just fetch the html</p> <h3 id="dancing-links"><a href="#dancing-links" class="header-anchor">#</a> Dancing links</h3> <h4 id="doubly-linked-list"><a href="#doubly-linked-list" class="header-anchor">#</a> Doubly linked list</h4> <h2 id="_2020-01-02"><a href="#_2020-01-02" class="header-anchor">#</a> 2020-01-02</h2> <h3 id="continuations"><a href="#continuations" class="header-anchor">#</a> continuations</h3> <p>it transforms all code into a state machine and uses exceptions to save the state of all functions on the stack. This means that every function is transformed into a big switch statement with every expression as separate cases, giving us the ability to arbitrarily jump around.</p> <p>wiki says:
an abstract representation of the control state of a computer program. A continuation reifies the program control state…</p> <p>call/cc:  call-with-current-continuation</p> <h3 id="private-method-leaks"><a href="#private-method-leaks" class="header-anchor">#</a> private method leaks</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">somePublicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'public api called.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">privateFuncOne</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'secret one called.'</span><span class="token punctuation">)</span>
    <span class="token function">somePublicApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> <span class="token function-variable function">privateFuncTwo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'secret two called.'</span><span class="token punctuation">)</span>
    <span class="token function">privateFuncOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  window<span class="token punctuation">.</span><span class="token function-variable function">exportFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">privateFuncTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> privateFuncOne<span class="token punctuation">,</span> privateFuncTwo
<span class="token function-variable function">somePublicApi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  privateFuncOne <span class="token operator">=</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>caller<span class="token punctuation">;</span>
  privateFuncTwo <span class="token operator">=</span> privateFuncOne<span class="token punctuation">.</span>caller<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">exportFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>privateFuncOne<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>privateFuncTwo<span class="token punctuation">)</span>
</code></pre></div><h3 id="bytecode-peephole-optimization"><a href="#bytecode-peephole-optimization" class="header-anchor">#</a> bytecode peephole optimization</h3> <p>count regexp usage, if 'hot', compile it to native code</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex">/[^_]*/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'a0b*c_ef'</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// → matches 'a0b*c'</span>
</code></pre></div><ol><li>Load current character.</li> <li>Check if character equals '_'.</li> <li>If not, advance current position in the subject string and goto 1.</li></ol> <p>replace sequences of bytecodes with a new optimized bytecode that combines the functionality of multiple bytecodes</p> <p>can even handle the implicit loop created by the goto explicitly in the new bytecode, thus a single bytecode handles all matching characters, saving 16 dispatches.</p> <h3 id="codestubassembler"><a href="#codestubassembler" class="header-anchor">#</a> CodeStubAssembler</h3> <p><img src="https://v8.dev/_img/csa/csa.svg" alt=""></p> <ul><li><p>builtins and hand-written assembly in V8</p></li> <li><p>type verificatio at IR(turboFan) level</p></li> <li><p>byte code peephole opt:</p> <ul><li>replace sequences of bytecodes with a new optimized bytecode that combines the functionality of multiple bytecodes</li></ul></li> <li><p>JIT-less V8 ( --jitless )</p> <ul><li>allocating executable memory at runtime
<ul><li>turboFan create native code for hot js functions, need to allocate memory at runtime, fast. but</li> <li>some disallow write to memory, and disallow write reduce exploit risk</li></ul></li></ul></li> <li><p><a href="https://v8.dev/docs/turbofan" target="_blank" rel="noopener noreferrer">turboFan<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> JIT implementation</p> <ul><li><a href="https://darksi.de/d.sea-of-nodes/" target="_blank" rel="noopener noreferrer">sea of nodes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> IR allow more reording
<ul><li>AST to data-flow graph</li> <li>and convert to SSA, remove control dependency, compiler is free to move them</li> <li>control flow graph, group nodes to blocks</li> <li>reduction
<ul><li>compute int range</li> <li>compute limits</li> <li>apply range and limits to decide length check is unnecessary</li> <li>move code(arr.length) out of loop</li></ul></li></ul></li></ul></li> <li><p><a href="https://v8.dev/blog/ignition-interpreter" target="_blank" rel="noopener noreferrer">ignition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> interpreter</p></li></ul> <p><img src="https://v8.dev/_img/ignition-interpreter/ignition-pipeline.png" alt=""></p> <h2 id="_2020-01-03"><a href="#_2020-01-03" class="header-anchor">#</a> 2020-01-03</h2> <h3 id="matisse-eb"><a href="#matisse-eb" class="header-anchor">#</a> Matisse EB</h3> <p><a href="https://thetype.com/2019/12/17434/" target="_blank" rel="noopener noreferrer">末世感叩击：《新世纪福音战士》的文字世界<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="https://thetype.com/wp-content/uploads/2019/11/06_95tv_allep_titlecard.gif" alt="片头"></p> <p>机械拉伸的特殊质感</p> <h3 id="dancing-links-sodoku-polyominoes"><a href="#dancing-links-sodoku-polyominoes" class="header-anchor">#</a> dancing links, sodoku, polyominoes</h3> <p>exact cover problem</p> <h2 id="_2020-01-04"><a href="#_2020-01-04" class="header-anchor">#</a> 2020-01-04</h2> <p>Rust-lang</p> <p>ClojureScript</p> <p>streaming algorithm</p> <p>string search algorithm</p> <ul><li><p>DFA, powerset construction</p></li> <li><p>Knuth–Morris–Pratt computes a DFA that recognizes inputs with the string to search for as a suffix</p></li> <li><p>Boyer–Moore starts searching from the end of the needle, so it can usually jump ahead a whole needle-length at each step</p></li> <li><p>Baeza–Yates(Bitap) keeps track of whether the previous j characters were a prefix of the search string, and is therefore adaptable to fuzzy string searching</p></li></ul> <h2 id="_2020-01-05"><a href="#_2020-01-05" class="header-anchor">#</a> 2020-01-05</h2> <p>Babel plugin system</p> <p>Babel way: tokenizer, transform, codegen
visitor</p> <h2 id="_2020-01-06"><a href="#_2020-01-06" class="header-anchor">#</a> 2020-01-06</h2> <p>max flow</p> <h2 id="_2020-01-07"><a href="#_2020-01-07" class="header-anchor">#</a> 2020-01-07</h2> <h3 id="import-module-e-g-lodash-a-benchmark"><a href="#import-module-e-g-lodash-a-benchmark" class="header-anchor">#</a> <a href="https://www.blazemeter.com/blog/the-correct-way-to-import-lodash-libraries-a-benchmark/" target="_blank" rel="noopener noreferrer">import module, e.g. lodash, a benchmark<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li>The smallest bundle size could also be reached by using the babel-plugin-lodash together with lodash-webpack-plugin for cherry-picking only the used functions.</li></ul> <h3 id="web-perf-wg-2019"><a href="#web-perf-wg-2019" class="header-anchor">#</a> <a href="https://blog.yoav.ws/webperfwg_f2f_2019/" target="_blank" rel="noopener noreferrer">web perf WG 2019<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li>SPA metrics, ways to measure soft navigation</li> <li><a href="https://docs.google.com/presentation/d/1GUB081FTpvFEwEkfePagFEkiqcLKKnIHkhym-I8tTd8/edit#slide=id.g5b43bd1ecf_1_928" target="_blank" rel="noopener noreferrer">scheduling api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.google.com/document/d/10vO0eRqLjY6SSWNurVwW_pf8g0hg1e63OUoxiEQDZiQ/edit#" target="_blank" rel="noopener noreferrer">CPU reporting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/ulan/javascript-agent-memory/blob/master/explainer.md" target="_blank" rel="noopener noreferrer">memory api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="_2020-01-08"><a href="#_2020-01-08" class="header-anchor">#</a> 2020-01-08</h2> <h3 id="a-tricky-linked-list-broken-keyboard"><a href="#a-tricky-linked-list-broken-keyboard" class="header-anchor">#</a> a tricky linked list, <a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=3139" target="_blank" rel="noopener noreferrer">Broken keyboard<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> scase <span class="token operator">=</span> <span class="token string">&quot;This_is_a_[Beiju]_text&quot;</span>

<span class="token keyword">function</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  s <span class="token operator">=</span> <span class="token string">' '</span><span class="token operator">+</span>s
   <span class="token keyword">const</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span>length
   <span class="token keyword">let</span> last <span class="token operator">=</span> cur <span class="token operator">=</span> <span class="token number">0</span>
   <span class="token keyword">let</span> next <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
   next<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;[&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cur <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cur <span class="token operator">=</span> last
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      next<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> next<span class="token punctuation">[</span>cur<span class="token punctuation">]</span>
      next<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">=</span> i
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">next[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">] = next[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cur<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">next[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cur<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">] = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">===</span> last<span class="token punctuation">)</span> last <span class="token operator">=</span> i<span class="token punctuation">;</span>
      cur <span class="token operator">=</span> i
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> next<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">=</span> next<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// res.push(`${s[i]}:${i} `)</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">solve</span><span class="token punctuation">(</span>scase<span class="token punctuation">)</span>
</code></pre></div><h3 id="doubly-linked-list-uva-12657"><a href="#doubly-linked-list-uva-12657" class="header-anchor">#</a> doubly linked list, UVa 12657</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">link</span><span class="token punctuation">(</span><span class="token parameter">l<span class="token punctuation">,</span> r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  right<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> r
  left<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">=</span> l
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> cmds</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">-</span><span class="token number">1</span>
    right<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
  left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> n

  <span class="token keyword">let</span> m <span class="token operator">=</span> cmds<span class="token punctuation">.</span>length<span class="token punctuation">,</span> inv <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>op<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> cmds<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> inv <span class="token operator">=</span> <span class="token operator">!</span>inv<span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">===</span> x<span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">!==</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> inv<span class="token punctuation">)</span> op <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">-</span> op<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">==</span> left<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">=</span> right<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> lx <span class="token operator">=</span> left<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> rx <span class="token operator">=</span> right<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> ly <span class="token operator">=</span> left<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> ry <span class="token operator">=</span> right<span class="token punctuation">[</span>y<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>


  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    b <span class="token operator">=</span> right<span class="token punctuation">[</span>b<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> ans <span class="token operator">+=</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>inv <span class="token operator">&amp;&amp;</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ans <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> ans <span class="token comment">// flip odd and even</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> ans
<span class="token punctuation">}</span>
</code></pre></div><h3 id="uva839-cover-of-clrs"><a href="#uva839-cover-of-clrs" class="header-anchor">#</a> UVa839, cover of CLRS!</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">function</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token parameter">ws</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>w1<span class="token punctuation">,</span> d1<span class="token punctuation">,</span> w2<span class="token punctuation">,</span> d2<span class="token punctuation">]</span> <span class="token operator">=</span> ws<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

  i<span class="token operator">++</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> ws<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>

  <span class="token keyword">let</span> b1 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> b2 <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>w1<span class="token punctuation">)</span> <span class="token punctuation">[</span>b1<span class="token punctuation">,</span> w1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>w2<span class="token punctuation">)</span> <span class="token punctuation">[</span>b2<span class="token punctuation">,</span> w2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>b1 <span class="token operator">&amp;&amp;</span> b2 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>w1 <span class="token operator">*</span> d1 <span class="token operator">===</span> w2 <span class="token operator">*</span> d2<span class="token punctuation">)</span><span class="token punctuation">,</span> w1 <span class="token operator">+</span> w2<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">ws</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> w<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="uva-297-quadtree"><a href="#uva-297-quadtree" class="header-anchor">#</a> UVa 297, <a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=233" target="_blank" rel="noopener noreferrer">quadtree<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="print-subset-binary"><a href="#print-subset-binary" class="header-anchor">#</a> print subset binary</h3> <div class="language-js extra-class"><pre class="language-js"><code>n <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">function</span> <span class="token function">print_subset</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print_subset</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2020-01-10"><a href="#_2020-01-10" class="header-anchor">#</a> 2020-01-10</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#! /usr/bin/env bash</span>
<span class="token builtin class-name">set</span> -euo pipefail
<span class="token comment"># -e ensure stops on first command failure</span>
<span class="token comment"># -u ensure stops on first unset variable, otherwise replace it with empty def values</span>
<span class="token comment"># -o pipefail if any fail in pipeline, overall exit status is the one that fails</span>
</code></pre></div><h2 id="_2020-01-14"><a href="#_2020-01-14" class="header-anchor">#</a> 2020-01-14</h2> <h3 id="ideal-path"><a href="#ideal-path" class="header-anchor">#</a> <a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=4474" target="_blank" rel="noopener noreferrer">ideal path<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>https://github.com/aoapc-book/aoapc-bac2nd/blob/master/ch6/UVa1599.cpp</p> <h3 id="pairs-of-strings-without-common-chars"><a href="#pairs-of-strings-without-common-chars" class="header-anchor">#</a> <a href="https://www.quora.com/Given-a-dictionary-of-words-how-can-we-efficiently-find-a-pair-words-if-they-dont-have-characters-in-common-and-the-sum-of-their-length-is-the-maximum" target="_blank" rel="noopener noreferrer">pairs of strings without common chars<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Our algorithm will consist of three steps:</p> <ol><li>For each set S of letters, find the longest word that consists of exactly those letters.</li> <li>For each set S of letters, find the longest word that consists of at most those letters (i.e., some letters may be unused, but you cannot use a letter that does not belong to S).</li> <li>For each word w, compute length(w) + length(longest word out of letters not in w) and pick the maximum.</li></ol> <p>Step 1 is easy: just take an array of size 2𝑎, then read the input, and for each word update the corresponding cell. This can be done in 𝑂(ℓ𝑛).</p> <p>Step 2 can be done using dynamic programming. We process the subsets of our alphabet in the order 0, 1, ..., 2𝑎−1. (Note that this  order that has the property that for any set S, all subsets of S are processed before S.) For each set of letters S, the best word for S is either the best word made out of exactly these letters (this we computed in phase 1), or at least one letter is unused. We try all possibilities for the unused letter and pick the best one. All of this takes 𝑂(𝑎2𝑎) time.</p> <p>Step 3 is again easy. If we stored the set of letters for each word in step 1, step 3 can now be done in 𝑂(𝑛) time. Hence the overall time complexity is 𝑂(ℓ𝑛+𝑎2𝑎).</p> <h2 id="_2020-01-16"><a href="#_2020-01-16" class="header-anchor">#</a> 2020-01-16</h2> <h3 id="longest-repeating-character-replacement"><a href="#longest-repeating-character-replacement" class="header-anchor">#</a> longest-repeating-character-replacement</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">longestRepeat</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> end <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> end<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we only need to know the length of most frequent char</span>
    maxCount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxCount<span class="token punctuation">,</span> <span class="token operator">++</span>count<span class="token punctuation">[</span>s<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> maxCount <span class="token operator">&gt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">[</span>s<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span>
      start<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxLen<span class="token punctuation">,</span> end <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> maxLen
<span class="token punctuation">}</span>
</code></pre></div><h3 id="label-and-input-association"><a href="#label-and-input-association" class="header-anchor">#</a> label and input association</h3> <p>When a <code>&lt;label&gt;</code> is clicked or tapped and it is associated with a form control, the resulting click event is also raised for the associated control.</p> <h3 id="animation-overview"><a href="#animation-overview" class="header-anchor">#</a> animation overview</h3> <p>box-shadow
width
event 'transitionend'
Web Animations API</p> <p>transition: transform 500ms ease-out;
transition: transform 500ms cubic-bezier(0.465, 0.183, 0.153, 0.946);</p> <p>Ensure that any animating element has will-change set for anything you plan to change well ahead of the animation starting. For view transitions, it’s highly likely you will want to use will-change: transform.</p> <p>UI trigger by user: quick intro, slow outro
display as quick as 100ms, view out as quick as 300ms</p> <p>UI trigger by code(err, modal): slow intro, quick outro</p> <p>CSS-based animations, and Web Animations where supported natively, are typically handled on a thread known as the &quot;compositor thread&quot;</p> <p>Include initial-scale=1 to establish a 1:1 relationship between CSS pixels and device-independent pixels.</p> <h3 id="media-query"><a href="#media-query" class="header-anchor">#</a> media query</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width: 640px)&quot; href=&quot;max-640px.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(min-width: 640px)&quot; href=&quot;min-640px.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(orientation: portrait)&quot; href=&quot;portrait.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; media=&quot;(orientation: landscape)&quot; href=&quot;landscape.css&quot;&gt;
&lt;style&gt;
  @media (min-width: 500px) and (max-width: 600px) {
    h1 {
      color: fuchsia;
    }

    .desc:after {
      content:&quot; In fact, it's between 500px and 600px wide.&quot;;
    }
  }
&lt;/style&gt;
</code></pre></div><ul><li>don't use <code>min-device-width</code></li></ul> <p>min-width is based on the size of the browser window whereas min-device-width is based on the size of the screen. Unfortunately some browsers, including the legacy Android browser, don't report the device width properly; they report the screen size in device pixels instead of the expected viewport width.</p> <p>In addition, using min-device-width can prevent content from adapting on desktops or other devices that allow windows to be resized because the query is based on the actual device size, not the size of the browser window.</p> <ul><li><p>setting width: 100% on a top level div, ensures that it spans the width of the viewport and is never too big or too small for the viewport.</p></li> <li><p>Classic readability theory suggests that an ideal column should contain 70 to 80 characters per line (about 8 to 10 words in English)</p></li></ul> <h3 id="responsive-pattern"><a href="#responsive-pattern" class="header-anchor">#</a> <a href="https://developers.google.com/web/fundamentals/design-and-ux/responsive/patterns" target="_blank" rel="noopener noreferrer">responsive pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h2 id="_2020-01-20"><a href="#_2020-01-20" class="header-anchor">#</a> 2020-01-20</h2> <h3 id="食物链-poj1182"><a href="#食物链-poj1182" class="header-anchor">#</a> <a href="http://poj.org/problem?id=1182" target="_blank" rel="noopener noreferrer">食物链 POJ1182<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>K pieces of information, either:</p> <p>type 1: x, y belong to the same category
type 2: x eats y</p> <p>solve:</p> <p>i[xyz]-m[ABC]: animal i belongs to category m</p> <p>type 1: union x-A and y-A, x-B and y-B
type 2: union x-A and y-B, x-B and y-C, and x-C and y-A</p> <h3 id="subfolders-to-subdomain"><a href="#subfolders-to-subdomain" class="header-anchor">#</a> subfolders to subdomain</h3> <div class="language-conf extra-class"><pre class="language-text"><code>location ^~ /admin/ {
    rewrite ^/admin/(.*) http://admin.example.com/$1 permanent;
}
</code></pre></div><h3 id="rails-code-stats"><a href="#rails-code-stats" class="header-anchor">#</a> Rails code stats</h3> <p><a href="https://github.com/rails/rails/blob/master/railties/lib/rails/code_statistics.rb" target="_blank" rel="noopener noreferrer">rails stats<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="compressing-tries-prefix-trees"><a href="#compressing-tries-prefix-trees" class="header-anchor">#</a> Compressing tries(prefix trees)</h3> <p>node v is redundant if v is not the root node, and v has 1 child, compress chains of node with 1 child to 1 single node.</p> <h3 id="tighyly-packed-tries"><a href="#tighyly-packed-tries" class="header-anchor">#</a> <a href="https://www.aclweb.org/anthology/W09-1505.pdf" target="_blank" rel="noopener noreferrer">tighyly packed tries<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li>use array represent of tree</li></ul> <h3 id="github-actions"><a href="#github-actions" class="header-anchor">#</a> Github Actions</h3> <p><a href="https://github.com/actions/starter-workflows/blob/master/ci/jekyll.yml" target="_blank" rel="noopener noreferrer">starter workflows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noopener noreferrer">gh-pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_2020-01-22"><a href="#_2020-01-22" class="header-anchor">#</a> 2020-01-22</h2> <h3 id="knight-s-shortest-path-on-chessboard"><a href="#knight-s-shortest-path-on-chessboard" class="header-anchor">#</a> <a href="https://stackoverflow.com/questions/2339101/knights-shortest-path-on-chessboard/8778592#8778592" target="_blank" rel="noopener noreferrer">Knight's Shortest Path<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on Chessboard</h3> <ul><li><p>use dijkstra, A*</p></li> <li><p>symmetrical across the axes and the diagonals</p></li> <li><p>(x,x) to (0,0): 2\lfloor \frac{x+2}{3}\rfloor, it takes two moves for (x+3,x+3) to (x,x)</p></li> <li><p>(x,0) to (0,0): x - 2\lfloor\frac{x}{4}\rfloor, it takes two moves for (x+4,0) to (x,0)</p></li> <li><p>it takes 4 moves for (2,2) to (0,0), 3 moves for (1,0) to (0,0)</p></li> <li><p>or, the formula T(m,n) = 1 + min(T(m-2, n-1), T(m-1, n-2))</p></li></ul> <h3 id="text-editor-implementation"><a href="#text-editor-implementation" class="header-anchor">#</a> <a href="https://everythingfrontend.com/pages/canvas-text-editor-tutorial.html#part2" target="_blank" rel="noopener noreferrer">text editor implementation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="aoapc-solution"><a href="#aoapc-solution" class="header-anchor">#</a> <a href="https://github.com/aoapc-book/aoapc-bac2nd" target="_blank" rel="noopener noreferrer">aoapc solution<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="suffix-tree"><a href="#suffix-tree" class="header-anchor">#</a> <a href="https://en.wikipedia.org/wiki/Suffix_tree" target="_blank" rel="noopener noreferrer">suffix tree<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <ul><li><p>Weiner 1973</p></li> <li><p>online construction by Ukkonen 1995</p></li> <li><p>optimal for all alphabets construction by farach 1997</p></li> <li><p>a compressed trie</p></li> <li><p>speed up for</p> <ul><li>locating a substring in S</li> <li>locating a substring if a certain number of mistakes are allowed</li> <li>locating matches for a regular expression pattern</li></ul></li> <li><p>Suffix trees also provide one of the first linear-time solutions for the longest common substring problem</p></li> <li><p>find longest repeated substrings</p></li> <li><p>longest palindromic substring</p></li></ul> <h2 id="_2020-01-24"><a href="#_2020-01-24" class="header-anchor">#</a> 2020-01-24</h2> <h3 id="heuristics-and-observations-of-teams-resolving-internet-service-outages"><a href="#heuristics-and-observations-of-teams-resolving-internet-service-outages" class="header-anchor">#</a> <a href="https://blog.acolyer.org/2020/01/22/trade-offs-under-pressure-part-1/" target="_blank" rel="noopener noreferrer">heuristics and observations of teams resolving internet service outages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Klein shows us that teams have some advantages over individuals:</p> <ul><li>a wider range of attention</li> <li>a broader range of expertise</li> <li>built-in variability</li> <li>a greater capability for reorganising their activities</li> <li>and the ability to work in parallel</li></ul> <p>Hollnagel enumerates a set of judgement heuristics often used in scenarios involving uncertainty and multiple conflicting goals:</p> <ul><li>ETTO (efficiency-thoroughness trade-off)</li> <li>Similarity matching – judging the similarity between triggering conditions and stored attributes of appropriate action</li> <li>Frequency gambling – choosing among partially matched options based on the frequency of their occurence</li> <li>Representativeness – if it looks like X, it probably is X</li> <li>Availability – choosing by how easily the option comes to mind</li> <li>Focus gambling – opportunistically changing from one hypothesis to another</li> <li>Conservative gambling – moving slowly and incrementally to build up a hypothesis</li> <li>Simultaneous scanning – trying out several hypotheses at the same time</li></ul> <p>thematic vagabonding: Too much jumping between options, never getting deep enough in any one area</p> <p>cognitive fixation: people can become fixated on a specific idea or solution even to the exclusion of incoming signals that indicate otherwise</p> <p>case study etsy:</p> <ul><li><p>the big slowdown came because the 400 errors for the missing shop data bypassed the caching mechanism, causing a full request to be made on every page load</p></li> <li><p>&quot;process tracing&quot;</p></li></ul> <p>four heuristic emerged</p> <ul><li>First look for any correlation to the last change made to the system</li> <li>If no correlated change is implicated, then widen the diagnostic search space to any potential signals</li> <li>When forming hypotheses and evaluating diagnostic directions, use pattern matching of signals or symptoms to either specific past events or recent events.</li> <li>During incident management, prefer peer review of any code changes to gain confidence as opposed to automated tests or other procedures.</li></ul> <blockquote><p>the greatest sources of success in automation-rich environments are (perhaps ironically) the adaptive capacities of human cognition and activity, not the pseudo-intelligence of the software</p></blockquote> <h2 id="_2020-01-25"><a href="#_2020-01-25" class="header-anchor">#</a> 2020-01-25</h2> <h3 id="inline-defer-in-golang"><a href="#inline-defer-in-golang" class="header-anchor">#</a> inline defer in Golang</h3> <p><a href="https://github.com/golang/proposal/blob/master/design/34481-opencoded-defers.md" target="_blank" rel="noopener noreferrer">proposal<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>LIFO order</li> <li>For each deferred function, compiler generates a runtime.deferproc call at the call site and call into runtime.deferreturn at the return point of the function.</li> <li>in 1.14, compiler do inline for better perf</li></ul> <h2 id="_2020-01-26"><a href="#_2020-01-26" class="header-anchor">#</a> 2020-01-26</h2> <h3 id="deep-copy-using-structral-clone"><a href="#deep-copy-using-structral-clone" class="header-anchor">#</a> deep copy using structral clone</h3> <p>Safari limits the amount of calls to replaceState to 100 within a 30 second window.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> oldState <span class="token operator">=</span> history<span class="token punctuation">.</span>state<span class="token punctuation">;</span>
  history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> document<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> copy <span class="token operator">=</span> history<span class="token punctuation">.</span>state<span class="token punctuation">;</span>
  history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>oldState<span class="token punctuation">,</span> document<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> copy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clone <span class="token operator">=</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deep-copy-using-messagechannel"><a href="#deep-copy-using-messagechannel" class="header-anchor">#</a> deep copy using MessageChannel</h3> <p>handle cyclical data structures, built-in data types like Map, Set and ArrayBuffer etc.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>port1<span class="token punctuation">,</span> port2<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    port2<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">ev</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    port1<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token comment">/* ... */</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clone <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">structuralClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="postmessage-perf"><a href="#postmessage-perf" class="header-anchor">#</a> <a href="https://dassur.ma/things/is-postmessage-slow/" target="_blank" rel="noopener noreferrer">postMessage perf<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Even on the slowest devices, you can postMessage() objects up to 100KiB and stay within your 100ms response budget. If you have JS-driven animations, payloads up to 10KiB are risk-free.</p> <h2 id="_2020-01-27"><a href="#_2020-01-27" class="header-anchor">#</a> 2020-01-27</h2> <h3 id="ocaml-signature"><a href="#ocaml-signature" class="header-anchor">#</a> Ocaml signature</h3> <ul><li>A signature specifies which components of a structure are accessible from the outside, and with which type.</li></ul> <h2 id="_2020-01-28"><a href="#_2020-01-28" class="header-anchor">#</a> 2020-01-28</h2> <h3 id="conditional-mutual-information"><a href="#conditional-mutual-information" class="header-anchor">#</a> Conditional Mutual Information</h3> <ul><li>form: any observable realization of language</li> <li>meaning: relation between forms and something external to language</li> <li>Turing test a,b, and octupus</li></ul> <h3 id="schrodinger-problem-and-connection-with-optimal-transport"><a href="#schrodinger-problem-and-connection-with-optimal-transport" class="header-anchor">#</a> Schrodinger problem and connection with optimal transport</h3> <h3 id="gradient-surgery-for-multi-task-learning"><a href="#gradient-surgery-for-multi-task-learning" class="header-anchor">#</a> Gradient Surgery for Multi-Task Learning</h3> <ul><li>projects a task’s gradient onto the normal plane of the gradient of any other task that has a conflicting gradient</li></ul> <h3 id="multilingual-denoising-pre-training-for-neural-machine-translation"><a href="#multilingual-denoising-pre-training-for-neural-machine-translation" class="header-anchor">#</a> Multilingual Denoising Pre-training for Neural Machine Translation</h3> <h3 id="the-nonstochastic-control-problem"><a href="#the-nonstochastic-control-problem" class="header-anchor">#</a> The Nonstochastic Control Problem</h3> <h2 id="_2020-01-29"><a href="#_2020-01-29" class="header-anchor">#</a> 2020-01-29</h2> <h3 id="sync-task"><a href="#sync-task" class="header-anchor">#</a> <a href="https://gist.github.com/sebmarkbage/2c7acb6210266045050632ea611aebee" target="_blank" rel="noopener noreferrer">sync task<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fetchTextSync</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pending<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> pending<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">text</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      pending<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  pending<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">throw</span> promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">runPureTask</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> x<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> x<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// run</span>
<span class="token keyword">function</span> <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token function">fetchTextSync</span><span class="token punctuation">(</span><span class="token string">'/users/'</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> user<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'Seb'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Hey'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">fetchTextSync</span><span class="token punctuation">(</span><span class="token string">'/greeting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'!'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">runPureTask</span><span class="token punctuation">(</span>getMessage<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">message</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="language-server-protocol"><a href="#language-server-protocol" class="header-anchor">#</a> Language Server Protocol</h3> <p><a href="https://github.com/sourcegraph/language-server-protocol/blob/streaming/protocol.md" target="_blank" rel="noopener noreferrer">protocol<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>idea: document server protocol</p> <ul><li>plugin service</li> <li>semantic service</li></ul> <h2 id="_2020-01-30"><a href="#_2020-01-30" class="header-anchor">#</a> 2020-01-30</h2> <h3 id="normalization-of-deviance"><a href="#normalization-of-deviance" class="header-anchor">#</a> <a href="https://danluu.com/wat/" target="_blank" rel="noopener noreferrer">Normalization of deviance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2821100/" target="_blank" rel="noopener noreferrer">John Banja, normalization of deviance in health care<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The paper has specific sub-sections on how to prevent normalization of deviance, which I recommend reading in full</p> <ul><li>Pay attention to weak signals</li> <li>Resist the urge to be unreasonably optimistic</li> <li>Teach employees how to conduct emotionally uncomfortable conversations</li> <li>System operators need to feel safe in speaking up</li> <li>Realize that oversight and monitoring are never-ending</li></ul> <p>tech postmortem blog post</p> <p>cargo cult diffusion</p> <blockquote><p>If there were an acute failure, you might see a postmortem, but while we'll do postmortems for &quot;the site was down for 30 seconds&quot;, we rarely do postmortems for &quot;this takes 10x as much ops effort as the alternative and it's a death by a thousand papercuts&quot;, &quot;we architected this thing poorly and now it's very difficult to make changes that ought to be trivial&quot;, or &quot;a competitor of ours was able to accomplish the same thing with an order of magnitude less effort&quot;. I'll sometimes do informal postmortems by asking everyone involved oblique questions about what happened, but more for my own benefit than anything else, because I'm not sure people really want to hear the whole truth. This is especially sensitive if the effort has generated a round of promotions, which seems to be more common the more screwed up the project. The larger the project, the more visibility and promotions, even if the project could have been done with much less effort.</p></blockquote> <h3 id="simd-in-wasm"><a href="#simd-in-wasm" class="header-anchor">#</a> SIMD in WASM</h3> <p>https://v8.dev/features/simd</p> <p>mediapipe project</p> <h3 id="wasm"><a href="#wasm" class="header-anchor">#</a> WASM</h3> <ul><li><p>magic n: 0061736d</p></li> <li><p>WebAssembly has the following value types:</p> <p>i32: 32-bit integer
i64: 64-bit integer
f32: 32-bit floating point
f64: 64-bit floating point
Each parameter and local variable has exactly one value type. Function signatures consist of a sequence of zero or more parameter types and a sequence of zero or more return types. (Note: in the MVP, a function can have at most one return type).</p></li> <li><p>table and memory section implement core security</p></li> <li><p>-s SIDE_MODULE=2, generate side module</p></li> <li><p>WEBASSEMBLY JAVASCRIPT API</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>WebAssembly<span class="token punctuation">.</span><span class="token function">instantiateStreaming</span><span class="token punctuation">(</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;side_module.wasm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> importObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> value <span class="token operator">=</span> result<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function">_Increment</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>instantiate
instantiateStreaming

compile
compileStreaming

importObject<span class="token operator">:</span> <span class="token punctuation">{</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    memory<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Module<span class="token punctuation">.</span><span class="token function">__malloc</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>
Module<span class="token punctuation">.</span><span class="token function">_free</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Module<span class="token punctuation">.</span><span class="token function">ccall</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> returnTypes<span class="token punctuation">,</span> <span class="token punctuation">[</span>returns<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>args<span class="token punctuation">]</span><span class="token punctuation">)</span>
Module<span class="token punctuation">.</span><span class="token constant">HEAP32</span><span class="token punctuation">.</span><span class="token constant">BYTES_PERS_ELEMENT</span>
Module<span class="token punctuation">.</span><span class="token constant">HEAP32</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">ifdef</span> __EMSCRIPTEN__</span>
  <span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;emscripten.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>

<span class="token macro property">#<span class="token directive keyword">ifdef</span> __cplusplus</span>
  <span class="token keyword">extern</span> C <span class="token punctuation">{</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token macro property">#<span class="token directive keyword">ifdef</span> __cplusplus</span>
  <span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>

EMSCRIPTEN_KEEPLIVE

<span class="token keyword">typedef</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span>onSuccess<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token keyword">typedef</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span>onError<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>

EXPORTED_FUNCTIONS
EXTRA_EXPORTED_RUNTIME_METHODS
RESERVED_FUNCTION_POINTERS
</code></pre></div><h2 id="_2020-02-02"><a href="#_2020-02-02" class="header-anchor">#</a> 2020-02-02</h2> <h3 id="rust"><a href="#rust" class="header-anchor">#</a> Rust</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> rand<span class="token punctuation">::</span>Rng<span class="token punctuation">;</span>

String<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

std<span class="token punctuation">::</span>cmp<span class="token punctuation">::</span>Ordering<span class="token punctuation">;</span>

<span class="token keyword">match</span> guess<span class="token punctuation">.</span><span class="token function">cmp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>secret_number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Ordering<span class="token punctuation">::</span>Less <span class="token operator">=&gt;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
  _ <span class="token operator">=&gt;</span> <span class="token string">&quot; &quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> guess <span class="token punctuation">:</span> u32 <span class="token operator">=</span> <span class="token keyword">match</span> guess<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Ok</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num<span class="token punctuation">,</span>
  <span class="token function">Err</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">continue</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tup <span class="token punctuation">:</span> <span class="token punctuation">(</span>i32<span class="token punctuation">,</span> f64<span class="token punctuation">,</span> u8<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">five</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> i32 <span class="token punctuation">{</span>
  <span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> guess <span class="token operator">=</span> String<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

io<span class="token punctuation">::</span><span class="token function">stdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">read_line</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> guess<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;Fail&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> guess <span class="token punctuation">:</span> u32 <span class="token operator">=</span> guess<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> element <span class="token keyword">in</span> a<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">for</span> number <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rev</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">enum</span> Message <span class="token punctuation">{</span>
  Quit<span class="token punctuation">,</span>
  Move <span class="token punctuation">{</span> x<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> y<span class="token punctuation">:</span> i32 <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Write<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> Option<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">Some</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span>
  None<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> y <span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>i8<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">=</span> None

<span class="token keyword">let</span> v <span class="token punctuation">:</span> Vec<span class="token operator">&lt;</span>i32<span class="token operator">&gt;</span> <span class="token operator">=</span> Vec<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token function">Vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> third <span class="token punctuation">:</span> <span class="token operator">&amp;</span>i32 <span class="token operator">=</span> <span class="token operator">&amp;</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> third <span class="token punctuation">:</span> <span class="token operator">&amp;</span>i32 <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">&amp;</span>v <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> v <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// deref coersion</span>
<span class="token keyword">let</span> s3 <span class="token operator">=</span> s1 <span class="token operator">+</span> <span class="token operator">&amp;</span>s2

<span class="token keyword">use</span> std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span>HashMap<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> scores <span class="token operator">=</span> HashMap<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> scores <span class="token punctuation">:</span> HashMap<span class="token operator">&lt;</span>_<span class="token punctuation">,</span>_<span class="token operator">&gt;</span> <span class="token operator">=</span> teams<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">zip</span><span class="token punctuation">(</span>initial<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">entry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or_insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">panic!</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

RUST_BACKTRACE<span class="token operator">=</span><span class="token number">1</span>

<span class="token keyword">enum</span> Result<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> E<span class="token punctuation">.</span> <span class="token punctuation">{</span>
  <span class="token function">OK</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">Err</span><span class="token punctuation">(</span>E<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">match</span> f <span class="token punctuation">{</span>
  <span class="token function">Ok</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> file<span class="token punctuation">,</span>
  <span class="token function">Err</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">panic!</span><span class="token punctuation">(</span><span class="token string">&quot;fail&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{:?}&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>

<span class="token keyword">match</span> f<span class="token punctuation">.</span><span class="token function">read_to_string</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> s<span class="token punctuation">)</span>

<span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">impl</span> Guess <span class="token punctuation">{</span>
  <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> u32<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Guess
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> largest<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span>list<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> T <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">struct</span> Point<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> T<span class="token punctuation">,</span>
  y<span class="token punctuation">:</span> T<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Point<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">fn</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span>T <span class="token punctuation">{</span>
    <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>x
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Trait Type</span>
<span class="token comment">// Trait Bound</span>
<span class="token keyword">fn</span> some_f<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> U<span class="token operator">&gt;</span><span class="token punctuation">(</span>t<span class="token punctuation">:</span> T<span class="token punctuation">,</span> u<span class="token punctuation">:</span> U<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> i32
  <span class="token keyword">where</span> T<span class="token punctuation">:</span> Display <span class="token operator">+</span> Clone<span class="token punctuation">,</span>
        U<span class="token punctuation">:</span> Clone <span class="token operator">+</span> Debug<span class="token punctuation">,</span>

<span class="token comment">// lifetimes</span>
<span class="token keyword">fn</span> largest<span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'a</span> str<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'a</span> str<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'a</span> str <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// smart pointer</span>
Box<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
Rc<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
Ref<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
RefMut<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>

RefCell<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
std<span class="token punctuation">::</span>cell<span class="token punctuation">:</span>RefCell
<span class="token comment">// allows mutable borrows checked at runtime</span>
<span class="token keyword">self</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">borrow_mut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

std<span class="token punctuation">::</span>rc<span class="token punctuation">::</span>Rc
Rc<span class="token punctuation">::</span>Clone
Rc<span class="token punctuation">::</span><span class="token function">strong_count</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span>

<span class="token comment">// prevent ref cycle</span>
Weak<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
RefCell<span class="token operator">&lt;</span>Weak<span class="token operator">&lt;</span>Node<span class="token operator">&gt;&gt;</span>
RefCell<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>Weak<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// branch, leaf</span>
<span class="token operator">*</span>leaf<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">borrow_mut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> Rc<span class="token punctuation">::</span><span class="token function">downgrade</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>branch<span class="token punctuation">)</span>
leaf<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">borrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">upgrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">// thread</span>
<span class="token keyword">use</span> std<span class="token punctuation">::</span>thread<span class="token punctuation">;</span>
<span class="token keyword">use</span> std<span class="token punctuation">::</span>time<span class="token punctuation">::</span>Duration<span class="token punctuation">;</span>

<span class="token keyword">let</span> handle <span class="token operator">=</span> thread<span class="token punctuation">::</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token punctuation">|</span><span class="token punctuation">|</span></span> <span class="token punctuation">{</span>
  thread<span class="token punctuation">::</span><span class="token function">sleep</span><span class="token punctuation">(</span>Duration<span class="token punctuation">::</span><span class="token function">from_millis</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

handle<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// thread take ownership</span>
thread<span class="token punctuation">::</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token punctuation">|</span><span class="token punctuation">|</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>


</code></pre></div><h2 id="_2020-02-04"><a href="#_2020-02-04" class="header-anchor">#</a> 2020-02-04</h2> <h3 id="opslang"><a href="#opslang" class="header-anchor">#</a> <a href="https://doc.openresty.com/en/opslang/" target="_blank" rel="noopener noreferrer">opslang<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="g-style-guide"><a href="#g-style-guide" class="header-anchor">#</a> <a href="https://github.com/google/styleguide" target="_blank" rel="noopener noreferrer">G style guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h2 id="_2020-02-25"><a href="#_2020-02-25" class="header-anchor">#</a> 2020-02-25</h2> <p>https://danluu.com/discontinuities/</p> <p>https://cli.github.com/manual/examples#checking-out</p> <div class="language-bash extra-class"><pre class="language-bash"><code>gh <span class="token function">pr</span> <span class="token punctuation">[</span>status, list, view, checkout, create<span class="token punctuation">]</span>
gh issue <span class="token punctuation">[</span>status, list, view, create<span class="token punctuation">]</span>
gh <span class="token builtin class-name">help</span>
</code></pre></div><h2 id="_2020-02-26"><a href="#_2020-02-26" class="header-anchor">#</a> 2020-02-26</h2> <h3 id="editorconfig"><a href="#editorconfig" class="header-anchor">#</a> EditorConfig</h3> <p>indent_style: tab, space</p> <p>indent_size: tab, int</p> <p>tab_width: int</p> <p>end_of_line: lf, crlf, cr</p> <p>charset:</p> <p>latin1
utf-8
utf-16be
utf-16le
utf-8-bom</p> <p>trim_trailing_whitespace</p> <p>insert_final_newline</p> <p>max_line_length</p> <h2 id="_2020-02-28"><a href="#_2020-02-28" class="header-anchor">#</a> 2020-02-28</h2> <h3 id="top-k-freq-word"><a href="#top-k-freq-word" class="header-anchor">#</a> top k freq word</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Split text into words by replacing non-word characters with newlines</span>
<span class="token function">tr</span> -cs A-Za-z <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token operator">|</span>
<span class="token comment"># Convert uppercase to lowercase</span>
<span class="token function">tr</span> A-Z a-z <span class="token operator">|</span>
<span class="token comment"># Sort so that identical words occur adjacently</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token comment"># Count occurrences of each line</span>
<span class="token function">uniq</span> -c <span class="token operator">|</span>
<span class="token comment"># Sort numerically by decreasing number of word occurrences</span>
<span class="token function">sort</span> -rn <span class="token operator">|</span>
<span class="token comment"># Quit after printing the K specified number of words</span>
<span class="token function">sed</span> <span class="token variable">${1}</span>q
</code></pre></div><h3 id="find-the-top-k-pairs-of-words-and-print-the-levenshtein-distance-between-each-pair"><a href="#find-the-top-k-pairs-of-words-and-print-the-levenshtein-distance-between-each-pair" class="header-anchor">#</a> find the top K pairs of words and print the Levenshtein distance between each pair</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Split text into words by replacing non-word characters with newlines</span>
<span class="token function">tr</span> -cs A-Za-z <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token operator">|</span>
<span class="token comment"># Convert uppercase to lowercase</span>
<span class="token function">tr</span> A-Z a-z <span class="token operator">|</span>
<span class="token comment"># Make pairs out of words by testing and storing the previous word</span>
<span class="token function">awk</span> <span class="token string">'prev {print prev, <span class="token variable">$1</span>} {prev = <span class="token variable">$1</span>}'</span> <span class="token operator">|</span>
<span class="token comment"># Sort so that identical words occur adjacently</span>
<span class="token function">sort</span> <span class="token operator">|</span>
<span class="token comment"># Count occurrences of each line</span>
<span class="token function">uniq</span> -c <span class="token operator">|</span>
<span class="token comment"># Sort numerically by decreasing number of word occurrences</span>
<span class="token function">sort</span> -nr <span class="token operator">|</span>
<span class="token comment"># Print the K specified number of pairs</span>
<span class="token function">head</span> -n <span class="token variable">$1</span> <span class="token operator">|</span>
<span class="token comment"># Remove the occurrence count, keeping the two words</span>
<span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>, <span class="token variable">$3</span>}'</span> <span class="token operator">|</span>
<span class="token comment"># Print the Levenshtein distance between word pair (autosplit into @F)</span>
perl -a -MText::LevenshteinXS -e <span class="token string">'print distance(@F), &quot;<span class="token entity" title="\n">\n</span>&quot;'</span>
</code></pre></div><h2 id="_2020-03-07"><a href="#_2020-03-07" class="header-anchor">#</a> 2020-03-07</h2> <p><a href="https://marginalrevolution.com/marginalrevolution/2020/03/my-avian-flu-blog-days.html" target="_blank" rel="noopener noreferrer">avian flu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li><p>The single most important thing we can do for a pandemic—whether avian flu or not—is to have well-prepared local health care systems. We should prepare for pandemics in ways that are politically sustainable and remain useful even if an avian flu pandemic does not occur.</p></li> <li><p>Prepare social norms and emergency procedures which would limit or delay the spread of a pandemic. Regular hand washing, and other beneficial public customs, may save more lives than a Tamiflu stockpile.</p></li> <li><p>Decentralize our supplies of anti-virals and treat timely distribution as more important than simply creating a stockpile.</p></li> <li><p>Institute prizes for effective vaccines and relax liability laws for vaccine makers. Our government has been discouraging what it should be encouraging.</p></li> <li><p>Respect intellectual property by buying the relevant drugs and vaccines at fair prices. Confiscating property rights would reduce the incentive for innovation the next time around.</p></li> <li><p>Make economic preparations to ensure the continuity of food and power supplies. The relevant “choke points” may include the check clearing system and the use of mass transit to deliver food supply workers to their jobs.</p></li> <li><p>Realize that the federal government will be largely powerless in the worst stages of a pandemic and make appropriate local plans.</p></li> <li><p>Encourage the formation of prediction markets in an avian flu pandemic. This will give us a better idea of the probability of widespread human-to-human transmission.</p></li> <li><p>Provide incentives for Asian countries to improve their surveillance. Tie foreign aid to the receipt of useful information about the progress of avian flu.</p></li> <li><p>Reform the World Health Organization and give it greater autonomy from its government funders.</p></li></ol> <p>And also from later on:</p> <ol start="4"><li><p>We should not expect to choke off a pandemic in its country of origin. Once a pandemic has started abroad, we should shut schools and many public places immediately.</p></li> <li><p>We should not obsess over avian flu at the expense of other medical issues. The next pandemic or public health crisis could come from any number of sources. By focusing on local preparedness and decentralized responses, this plan is robust to surprise and will also prove useful for responding to terrorism or natural catastrophe</p></li></ol> <h4 id="五力分析"><a href="#五力分析" class="header-anchor">#</a> 五力分析</h4> <p>消费者的议价能力</p> <p>替代品</p> <p>供应商的议价能力</p> <p>潜在竞争者</p> <p>现有竞争者</p> <h4 id="prog-principle-id-software"><a href="#prog-principle-id-software" class="header-anchor">#</a> <a href="https://medium.com/@aloukissas/programming-principles-from-id-software-bed83e762210" target="_blank" rel="noopener noreferrer">prog principle id software<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>Lampson’s <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/acrobat-17.pdf" target="_blank" rel="noopener noreferrer">timeless paper on system design<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>Principle 1: Just do it (and do it well).</strong>
This doesn’t necessarily mean overly complicate your current version of the product. In fact, this may one way of describing the iterative development practice. Build something that does one thing really well and keep improving upon it constantly. Just keep your quality standards high in each iteration.</p> <p><strong>Principle 2: Keep your code always runnable.</strong>
In his talk, Romero mentions how they had programmed the code to show an image of a bagel when the user hit an error loading a sprite. By adding good defaults/fallbacks, they made the game still playable. Had they not done this, the user would be blocked until the bug had been fixed (i.e. lost productivity hours). You can imagine how important this becomes as an engineering team grows larger. A practical example of this is using defaultProps in ReactJS.</p> <p><strong>Principle 3: Keep it simple.</strong>
This is obviously not novel. Call it Occam’s Razor or the KISS principle, keeping things as simple as possible is timeless great advice.</p> <p><strong>Principle 4: Invest time in building great tools.</strong>
In his talk, Romero mentioned that he built a level editor called TED. The time he spent building TED paid hefty dividends, since it immensely helped them rapidly ship one game after the other by boosting productivity. Since those days, there has been an explosion of developer tools that have helped boost developer productivity. But if something off-the-shelf doesn’t cut it, try to identify whether an internal tool can help your developers be at their most productive (even if it can take development resources off the main product).</p> <p><strong>Principle 5: Test your code thoroughly.</strong>
This covers many topics that many of the most effective engineering teams use as best practices: (a) dogfood your product as much as possible; (b) don’t delegate to others (e.g. QA engineers, or worse, customers) to find bugs in your code; (c) write as many tests as possible to accompany your code.</p> <p><strong>Principle 6: Fix bugs as soon as possible.</strong>
We are very strict about this at AgentRisk, a practice we’ve carried over from our previous startups. During our daily stand-ups, we make sure that any new bugs have the highest priority and get fixed ASAP. Obviously, not all bugs are equal, so some business-related judgement is warranted here.</p> <p><strong>Principle 7: Use a superior development system.</strong>
This is one that may mostly apply to game development. In other cases, you may want to go the other route when it comes to testing during development. For example, you may have users running your application on a mobile device that has very inferior specs, or they may be accessing your web application over a high-latency 2G connection. Make sure they don’t have a sucky UX.</p> <p><strong>Principle 8: Write code for this version of the product.</strong>
This mostly translates to “don’t transfer over limitations of your past code and its implementation to future code”. This is a tricky one and kind of ties with Principle 4 . As engineers, we are often tempted to “rewrite everything” from scratch. This is where having experienced engineering leadership is really important. Often, the choice to take the plunge and do a new implementation can pay dividends down the line (similar to building tools). For example, as Slack started scaling, they scraped their v1.0 implementation entirely and moved to a brand new architecture, reaping the rewards many times over. We also had a similar experience moving from Python to Elixir, having a much more robust codebase and much increased developer productivity.</p> <p><strong>Principle 9: Use good component abstractions.</strong>
This is really hard. If you have ever built and maintained an API, you know how hard it is to get it right (especially the first time). In his talk, Romero gives the example of encapsulate the functionality of a torch together with the flame and other related objects. Had they needed to move or update all torch instances in a level, having more a granular abstraction could have led to e.g. forgetting to move/update a flame. Spend a lot of time on this and try to get this right the first time. There will be compounding rewards in development and debugging time.</p> <p><strong>Principle 10: Seek feedback from peers while coding.</strong>
Using code review software can help with this. For more complex parts of a product, advance architecture review may be warranted. In any case, make sure you promote a culture that values communication and seeking feedback.</p> <h2 id="_2020-03-08"><a href="#_2020-03-08" class="header-anchor">#</a> 2020-03-08</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># rate table sort by name:</span>
<span class="token function">grep</span> -nR <span class="token string">'= \w*Table.new'</span> lib/undertaker <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=&quot;:&quot;}{print &quot;-L &quot; <span class="token variable">$2</span>&quot;,&quot;<span class="token variable">$2</span>&quot; &quot;<span class="token variable">$1</span>}'</span> <span class="token operator">|</span> <span class="token function">xargs</span> -I % <span class="token function">sh</span> -c <span class="token string">'git blame -e %'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">&gt;</span> blame_rates_name.log

<span class="token comment"># rate table sort by time</span>
<span class="token function">grep</span> -nR <span class="token string">'= \w*Table.new'</span> lib/undertaker <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=&quot;:&quot;}{print &quot;-L &quot; <span class="token variable">$2</span>&quot;,&quot;<span class="token variable">$2</span>&quot; &quot;<span class="token variable">$1</span>}'</span> <span class="token operator">|</span> <span class="token function">xargs</span> -I % <span class="token function">sh</span> -c <span class="token string">'git blame -e %'</span> <span class="token operator">|</span> <span class="token function">egrep</span> -o <span class="token string">'\((.*) .*\)'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable"><span class="token variable">$(</span>NF-3<span class="token variable">)</span></span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">&gt;</span> blame_rates_date.log

<span class="token comment"># if cond sort by name:</span>
<span class="token function">grep</span> -nR <span class="token string">'if \w* == &quot;\w'</span> lib/undertaker <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=&quot;:&quot;}{print &quot;-L &quot; <span class="token variable">$2</span>&quot;,&quot;<span class="token variable">$2</span>&quot; &quot;<span class="token variable">$1</span>}'</span> <span class="token operator">|</span> <span class="token function">xargs</span> -I % <span class="token function">sh</span> -c <span class="token string">'git blame -e %'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">&gt;</span> if_cond_name.log

<span class="token comment"># if cond sort by time</span>
<span class="token function">grep</span> -nR <span class="token string">'if \w* == &quot;\w'</span> lib/undertaker <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=&quot;:&quot;}{print &quot;-L &quot; <span class="token variable">$2</span>&quot;,&quot;<span class="token variable">$2</span>&quot; &quot;<span class="token variable">$1</span>}'</span> <span class="token operator">|</span> <span class="token function">xargs</span> -I % <span class="token function">sh</span> -c <span class="token string">'git blame -e %'</span> <span class="token operator">|</span> <span class="token function">egrep</span> -o <span class="token string">'\((.*) .*\)'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">&gt;</span> if_cond_date.log


<span class="token string">'= \w*Table.new'</span>
<span class="token comment"># rate table</span>
<span class="token comment"># 996 results in 264 files</span>

<span class="token string">'\w* == &quot;\w'</span>
<span class="token comment"># compare strings</span>
<span class="token comment"># 1023 results in 118 files</span>

<span class="token string">'when\s+&quot;\w+'</span>
<span class="token comment"># when clause(endorsements)</span>
<span class="token comment"># 4596 results in 266 files</span>

<span class="token string">'if \w+.?nil\?'</span>
<span class="token comment"># var.nil?</span>
<span class="token comment"># 68 results in 31 files</span>

<span class="token string">'Tier.new'</span>
<span class="token comment"># rate table rows</span>
<span class="token comment"># &gt;10000 results in 116 files</span>
</code></pre></div><h3 id="awk"><a href="#awk" class="header-anchor">#</a> <a href="https://gregable.com/2010/09/why-you-should-know-just-little-awk.html" target="_blank" rel="noopener noreferrer">awk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><a href="http://www.skeeve.com/awk-sys-prog.html" target="_blank" rel="noopener noreferrer">about awk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="if-start-and-end-clause"><a href="#if-start-and-end-clause" class="header-anchor">#</a> if, START and END clause</h4> <div class="language-sh extra-class"><pre class="language-sh"><code>
<span class="token function">awk</span> <span class="token string">'{if (<span class="token variable"><span class="token variable">$(</span>NF-2<span class="token variable">)</span></span> == &quot;200&quot;) {print <span class="token variable">$0</span>}}'</span> logs.txt

<span class="token function">awk</span> <span class="token string">'{a+=<span class="token variable"><span class="token variable">$(</span>NF-2<span class="token variable">)</span></span>}END{print &quot;Total:&quot;, a}'</span> logs.txt
</code></pre></div><h3 id="git-blame"><a href="#git-blame" class="header-anchor">#</a> git blame</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> blame -L <span class="token number">1,5</span> README.md
<span class="token comment"># --porcelain</span>
<span class="token comment"># --show-stats</span>
<span class="token comment"># --incremental</span>
<span class="token comment"># -f show file name</span>
<span class="token comment"># -e email address</span>
<span class="token comment"># -w ignore whitespace changes</span>
<span class="token comment"># -M option detects moved or copied lines within in the same file, show original author</span>
<span class="token comment"># -C option detects lines that were moved or copied from other files, show original author</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># count the number of lines attributed to each author</span>
<span class="token function">git</span> blame --line-porcelain <span class="token function">file</span> <span class="token operator">|</span>
<span class="token function">sed</span> -n <span class="token string">'s/^author //p'</span> <span class="token operator">|</span>
<span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn
</code></pre></div><h3 id="xargs"><a href="#xargs" class="header-anchor">#</a> xargs</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># -I string format</span>
<span class="token function">cat</span> foo.txt <span class="token operator">|</span> <span class="token function">xargs</span> -I % <span class="token function">sh</span> -c <span class="token string">'echo %; mkdir %'</span>

<span class="token comment"># -t option prints each command that will be executed to the terminal.</span>

<span class="token comment"># -p command will print the command to be executed and prompt the user to run it</span>
</code></pre></div><h3 id="china-brith-rate"><a href="#china-brith-rate" class="header-anchor">#</a> <a href="https://twitter.com/CarlMinzner/status/1201289127678726144" target="_blank" rel="noopener noreferrer">China brith rate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>1.7-1.8 fertility rate</p> <p>% of elderly (65+)
2020 16%
2030 25%
2040 33%
2050 38%
2060 41%</p> <h3 id="all-you-can-eat-economy"><a href="#all-you-can-eat-economy" class="header-anchor">#</a> all you can eat economy</h3> <p>https://thehustle.co/the-economics-of-all-you-can-eat-buffets/</p> <p>break down a $20 buffet</p> <p>buffets, like most restaurant, operate on a extremely thin margins: for every $20 in revenue, $19 might go toward overhead, leaving only $1(5%) in net profit</p> <p>food(37%), labor(30%), rent(14%), other(14%)</p> <blockquote><p>At a typical restaurant, a cook can service 25 customers per hour — and that’s at best</p></blockquote> <blockquote><p>a single buffet cook might be able to prep enough food for 200 people.</p></blockquote> <p>5% - 25% food will be wasted</p> <p>buying food in bulk</p> <p>cost per serving</p> <ul><li>potatos - $0.3</li> <li>salad - $0.5</li> <li>pasta - $0.75</li> <li>chicken - $1.13</li> <li>steak - $2.25</li></ul> <p>tricks</p> <ul><li>cheap stuff at front of line</li> <li>smaller plates</li> <li>larger than average spoon for patato, smaller than avg spoon for meats</li> <li>frequently refill water, use extra large glasses</li></ul> <p>1/20 over eaters</p> <blockquote><p>the number of buffets in America has fallen by 26% since 1998 — even as the total number of all restaurants in America has risen by 22%.</p></blockquote> <h3 id="will-coronavirus-harm-trump-s-reelection"><a href="#will-coronavirus-harm-trump-s-reelection" class="header-anchor">#</a> will coronavirus harm Trump's reelection</h3> <ul><li><p>Foreign country did this better than us” is never an argument that works in American politics.</p></li> <li><p>absolute performance is not what matters, but rather whether the economy is gaining momentum. if the coronavirus situation is improving in the months leading up to November, Trump will receive some credit for that</p></li> <li><p>politcians are rewarded electorally for their reponse to disasters, not for preparations.</p></li></ul> <h3 id="git-undoing"><a href="#git-undoing" class="header-anchor">#</a> git undoing</h3> <p><code>git log --oneline</code></p> <h4 id="remove-untracked"><a href="#remove-untracked" class="header-anchor">#</a> remove untracked</h4> <p><code>git clean -n</code></p> <p><code>git clean -di</code></p> <h3 id="抵挡遗忘"><a href="#抵挡遗忘" class="header-anchor">#</a> 抵挡遗忘</h3> <ul><li>Internet Archive 国际档案库时光穿梭机 自动抓取网页信息：https://archive.org/web/</li> <li>常春藤联盟各大图书馆联合发起的信息采集：https://archive-it.org/home/IvyPlus?</li> <li>斯坦福大学收集的中国非政府组织已经下线的网站存档：https://exhibits.stanford.edu/chinese-ngos</li> <li>海德堡大学收集的当代中国研究资料集；点击左边“浏览”和“搜索”可以看到标题和其它信息，下载全文需要注册用户。https://www.zo.uni-heidelberg.de/boa/digital_resources/dachs/about_en.html</li></ul> <h2 id="_2020-03-10"><a href="#_2020-03-10" class="header-anchor">#</a> 2020-03-10</h2> <h3 id="西州回鹘"><a href="#西州回鹘" class="header-anchor">#</a> 西州回鹘</h3> <p>840年漠北高原的回鹘帝国被属部黠戛斯攻破后，部落民众南迁至西域所建立的王朝</p> <h3 id="ericraymond"><a href="#ericraymond" class="header-anchor">#</a> EricRaymond</h3> <p>recent attempts to subvert OSD clauses 5 and 6</p> <h3 id="automl-zero"><a href="#automl-zero" class="header-anchor">#</a> autoML zero</h3> <h3 id="git-hooks"><a href="#git-hooks" class="header-anchor">#</a> Git hooks</h3> <p>Run rubocop and test on <code>git commit diff-code</code></p> <ul><li>Simple: use bash hooks</li> <li>Complex: use <a href="https://github.com/sds/overcommit" target="_blank" rel="noopener noreferrer">overcommit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Run</p> <ul><li>Stop too short commit msg</li> <li>Rubocop check</li> <li>Run test cases of diff code <code>bundle exec rake test:[diff]</code></li> <li>Run <code>npm run format:check</code> on JavaScript code (title team)
<code>format:check: eslint \&quot;**/*.js\&quot; &amp;&amp; prettier-check \&quot;**/*.{js,json,md}\&quot;</code></li></ul> <h2 id="_2020-03-13"><a href="#_2020-03-13" class="header-anchor">#</a> 2020-03-13</h2> <h3 id="british-government-s-strategy"><a href="#british-government-s-strategy" class="header-anchor">#</a> British government's strategy</h3> <p>Herd immunity isn’t the spread of natural immunity amongst a population.</p> <p>Cancelling large events is not effective, reducing the peak by less than 5%</p> <p>Public fatigue: people get bored and leave their homes just as the peak hits</p> <h3 id="camus-鼠疫"><a href="#camus-鼠疫" class="header-anchor">#</a> Camus 鼠疫</h3> <p>「用別樣的監禁生活再現某種監禁生活，與用不存在的事表現真事同等合理。</p> <p>60年代末，香港知名粵語片導演龍剛就拍過一部叫《昨天今天明天》（原名《瘟疫》）的電影</p> <p>根據《冷戰光影：地緣政治下的香港電影審查史》一書所說，冷戰時期港英政府一直以「政治中立」的態度包裝香港的電影審查制度，「配合自由世界反共之餘，也會同樣審查美國電影抨擊中國的內容，並不時在審查過程之中遷就中共觀點。</p> <h3 id="bamboo-ceiling"><a href="#bamboo-ceiling" class="header-anchor">#</a> <a href="https://www.pnas.org/content/117/9/4590" target="_blank" rel="noopener noreferrer">Bamboo ceiling<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>East Asians were lower in assertiveness, which consistently mediated the leadership attainment gap between East Asians and South Asians.</p> <h2 id="_2020-03-14"><a href="#_2020-03-14" class="header-anchor">#</a> 2020-03-14</h2> <h3 id="advanced-python"><a href="#advanced-python" class="header-anchor">#</a> Advanced Python</h3> <div class="language-py extra-class"><pre class="language-py"><code>__slots__
<span class="token comment"># remove overhead</span>
<span class="token comment"># PyPy includes slots optimization</span>
</code></pre></div><div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> ipython_memory_usage<span class="token punctuation">.</span>ipython_memory_usage <span class="token keyword">as</span> imu
imu<span class="token punctuation">.</span>start_watch_memory<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># use smartcd to automatically activate and deactivate virtualenv</span>
</code></pre></div><p><strong>collections</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict

<span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter

<span class="token keyword">from</span> collections <span class="token keyword">import</span> deque

<span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple
Animal <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Animal'</span><span class="token punctuation">,</span> <span class="token string">'name age type'</span><span class="token punctuation">)</span>
perry <span class="token operator">=</span> Animal<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;Perry&quot;</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">31</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span>
perrry<span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum
<span class="token keyword">class</span> <span class="token class-name">Species</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>
  cat <span class="token operator">=</span> <span class="token number">1</span>
  dog <span class="token operator">=</span> <span class="token number">2</span>
</code></pre></div><p><strong>introspect</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">dir</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> inspect
inspect<span class="token punctuation">.</span>getmembers<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>exceptions</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
  <span class="token comment">#</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
  <span class="token comment">#</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
  <span class="token comment">#</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
  <span class="token comment">#</span>
</code></pre></div><p><strong>one liner</strong>
https://wiki.python.org/moin/Powerful%20Python%20One-Liners</p> <div class="language-py extra-class"><pre class="language-py"><code>python <span class="token operator">-</span>m http<span class="token punctuation">.</span>server

<span class="token keyword">from</span> pprint <span class="token keyword">import</span> pprint

python <span class="token operator">-</span>c <span class="token string">&quot;import csv,json;print json.dumps(list(csv.reader(open('csv_file.csv'))))&quot;</span>
</code></pre></div><p><strong>for else</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> container<span class="token punctuation">:</span>
  <span class="token keyword">if</span> search_sth<span class="token punctuation">:</span>
    process<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token keyword">break</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
  nothing_found<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>c extension</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>gcc -shared -Wl,-soname,adder -o adder.so -fPIC add.c <span class="token comment"># linux</span>
gcc -shared -Wl,-install_name,adder.so -o adder.so -fPIC add.c <span class="token comment"># mac</span>

from ctypes <span class="token function">import</span> *
adder <span class="token operator">=</span> CDLL<span class="token punctuation">(</span><span class="token string">'./adder.so'</span><span class="token punctuation">)</span>
res_int <span class="token operator">=</span> adder.add_int<span class="token punctuation">(</span><span class="token number">4,5</span><span class="token punctuation">)</span>

<span class="token comment"># swig</span>
</code></pre></div><p><strong>file io</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> io
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'photo.jpg'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> inf<span class="token punctuation">:</span>
  jpgdata <span class="token operator">=</span> inf<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> jpgdata<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">b'\xff\xd8'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  text <span class="token operator">=</span> <span class="token string">u'This is a JPEG file (%d bytes long)\n'</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
  text <span class="token operator">=</span> <span class="token string">u'This is a random file (%d bytes long)\n'</span>

<span class="token keyword">with</span> io<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'summary.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> outf<span class="token punctuation">:</span>
  outf<span class="token punctuation">.</span>write<span class="token punctuation">(</span>text <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>jpgdata<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>function cache</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> functools <span class="token keyword">import</span> lru_cache
<span class="token decorator annotation punctuation">@lru_cache</span><span class="token punctuation">(</span>maxsize<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> fib<span class="token punctuation">:</span>
  xxx

fib<span class="token punctuation">.</span>cache_clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>context manager</strong></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">__enter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

<span class="token keyword">def</span> <span class="token function">__exit__</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> traceback<span class="token punctuation">)</span><span class="token punctuation">:</span>


<span class="token comment"># or</span>

<span class="token keyword">from</span> contextlib <span class="token keyword">import</span> contextmanager

<span class="token decorator annotation punctuation">@contextmanager</span>
<span class="token keyword">def</span> <span class="token function">open_file</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
  f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> f
  f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h2> <h3 id="implement-golang-channel-in-js"><a href="#implement-golang-channel-in-js" class="header-anchor">#</a> implement Golang channel in JS</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
&lt;h1&gt;Hello Vanilla!&lt;/h1&gt;
&lt;div&gt;
  We use Parcel to bundle this sandbox, you can find more info about Parcel
  &lt;a href=&quot;https://parceljs.org&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;here&lt;/a&gt;.
&lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> jchan <span class="token operator">=</span> <span class="token function">Chan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

js <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token string">'hey'</span>
  jchan <span class="token operator">&lt;</span><span class="token operator">-</span> k
<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

jchan<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// =============</span>

<span class="token keyword">const</span> gresolve <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">var</span> jchan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  gresovle <span class="token operator">=</span> resolve
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// vvvvvvvvvvvvv worker.js</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">&quot;https://unpkg.com/comlink/dist/umd/comlink.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// importScripts(&quot;../../../dist/umd/comlink.js&quot;);</span>

<span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token string">'hey'</span>

Comlink<span class="token punctuation">.</span><span class="token function">expose</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ^^^^^^^^^^^^^</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&quot;worker.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// WebWorkers use `postMessage` and therefore work with Comlink.</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Comlink<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>worker<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token comment">// vvvvvvvvvvvvv or async</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token string">'hey'</span>
  <span class="token function">gresolve</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ^^^^^^^^^^^^^</span>

jchan<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/josherich/blog/edit/master/logs/logs.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/logs/" class="prev router-link-active">Get Started</a></span> <span class="next"><a href="/logs/logs.html" class="router-link-exact-active router-link-active">Logs</a>
      →
    </span></p></div> </main></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup><!----></div></div>
    <script src="/logs/assets/js/app.5cc72574.js" defer></script><script src="/logs/assets/js/2.a50b14f1.js" defer></script><script src="/logs/assets/js/18.0ae10052.js" defer></script>
  </body>
</html>
