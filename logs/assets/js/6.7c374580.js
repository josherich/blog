(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{220:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-加载数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-加载数据"}},[t._v("#")]),t._v(" 1. 加载数据")]),t._v(" "),a("p",[t._v("下载新闻数据集")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取当前工作目录")]),t._v("\ngetwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设定当前工作目录")]),t._v("\nsetwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/{username}/project/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 载入数据，如果数据较大，推荐使用 data.table")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://www.r-bloggers.com/efficiency-of-importing-large-csv-files-in-r/")]),t._v("\nlibrary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data.table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndatac "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" fread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_entity_20180511.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sep "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2-预处理数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-预处理数据"}},[t._v("#")]),t._v(" 2. 预处理数据")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从 HTML 中提取文本")]),t._v("\nlibrary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("htm2txt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重命名列名")]),t._v("\nnames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datac"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_url"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_content"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_host_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"created_at"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"updated_at"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_image"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_topics"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_date"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntitles "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" datac"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("page_title\ntitles "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" htm2txt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("titles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntitles "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" gsub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"n\\t+"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" titles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nurls "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" datac"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("page_url\nurls "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" gsub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"n\\t+"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" urls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndatac"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("page_title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" titles\ndatac"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("page_url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" urls\n\nwrite.csv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_entity.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("datac"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-1-合并-dataframe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-合并-dataframe"}},[t._v("#")]),t._v(" 2.1 合并 dataframe")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取另一张存有正文内容的表格")]),t._v("\ndata_content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_content_full.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sep"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndatam "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" merge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dfcontent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" by.x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"V3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" by.y"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_url"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" all.x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndatacontent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" datam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("datam"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("page_content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NA"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-搜索关键词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-搜索关键词"}},[t._v("#")]),t._v(" 3. 搜索关键词")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("text_with_s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" grep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"美国"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" texts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("titles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntext_with_s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" grep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"美国"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" texts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("titles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-分词处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-分词处理"}},[t._v("#")]),t._v(" 4. 分词处理")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("install.packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jiebaR"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlibrary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jiebaR"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bylines "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stop_word "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stopwords_zh_cn.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntagging "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tag"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntagger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tag'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntokencn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" segment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntags "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vector_tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokencn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tagger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntagsns "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("grep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" names"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nextract "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" topn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nkws "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vector_keywords"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokencn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"_4-计算特征词，词义复杂度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-计算特征词，词义复杂度"}},[t._v("#")]),t._v(" 4. 计算特征词，词义复杂度")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("cal_dfm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  datap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("V5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n  sizep "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lengths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n  contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("cleancontent\n\n  tokensp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tokens"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  tokencn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" segment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  dfmp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" dfm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokensp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" remove "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stopwords"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chinese"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" remove_punct "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  topfeatures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dfmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  dfmp\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncal_dfm_tfidf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dfm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  dfm_tfidf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" dfm_tfidf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dfm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scheme_tf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  topfeatures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dfm_tfidf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  dfm_tfidf\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncal_ttr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  datap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("V5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("cleancontent\n  tokensp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tokens"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  trr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ntype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokensp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" lengths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokensp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  hist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ttr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ttr\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncalfeature"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ngetttr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"_5-lda"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-lda"}},[t._v("#")]),t._v(" 5. LDA")]),t._v(" "),a("h3",{attrs:{id:"_5-1-计算-lda-主题数量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-计算-lda-主题数量"}},[t._v("#")]),t._v(" 5.1 计算 LDA 主题数量")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("dfm1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" dfm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datacontent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("page_content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" remove "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stopwords"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chinese"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" remove_punct "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nresult "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" FindTopicsNumber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  dfm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  topics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" seq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" by "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  metrics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Griffiths2004"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CaoJuan2009"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Arun2010"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Deveaud2014"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Gibbs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  control "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("seed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("77")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mc.cores "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2L")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  verbose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("TRUE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nFindTopicsNumber_plot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nnumber_of_topics "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5-2-计算-lda-矩阵"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-计算-lda-矩阵"}},[t._v("#")]),t._v(" 5.2 计算 LDA 矩阵")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("tm1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" LDA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dfm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" number_of_topics"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Gibbs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  control "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("seed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nlibrary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tidytext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntmt1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" tidy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" matrix"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nterms1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" tmt1  "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v("\n  group_by"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v("\n  top_n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v("\n  ungroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v("\n  arrange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nterms1 "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v("\n  mutate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("term "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" reorder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("term"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%>%")]),t._v("\n  ggplot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("term"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fill "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" factor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  geom_col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("show.legend "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("FALSE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  facet_wrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v(" topic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scales "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"free"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  coord_flip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n  theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("family "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'STHeiti'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5-3-对主题分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-对主题分类"}},[t._v("#")]),t._v(" 5.3 对主题分类")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("post "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" posterior"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dfm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topics"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\npostmat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" as.data.frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\npostdat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" add_rownames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postmat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"doc_name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncolnames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postdat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" apply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("terms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" paste"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" collapse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nheatmap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scale"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"none"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ngroup_documents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic_vec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sorted "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" sort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic_vec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" decreasing "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index.return"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  dists "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" sorted"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("x\n  index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" sorted"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("ix\n  max "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" as.numeric"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    return"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    threshold "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" max "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),t._v("\n    names"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" index\n    return"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("dists "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" threshold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ngroups "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" sapply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("postdat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" group_documents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"fre"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fre"}},[t._v("#")]),t._v(" FRE")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("cal_fre "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ids"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  datap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"V5"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cleancontent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  datap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" datap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("V5 "),a("span",{pre:!0,attrs:{class:"token percent-operator operator"}},[t._v("%in%")]),t._v(" ids"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  all_measures "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" textstat_readability"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("cleancontent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Flesch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Dale.Chall"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SMOG"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Coleman.Liau"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Fucks"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nall_measures "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" cal_fre"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nreadability_matrix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" cbind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Flesch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Dale.Chall"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("SMOG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Coleman.Liau"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Fucks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nfre_core "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" cor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("readability_matrix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfre_core\n\ndatap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("fre_flesch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Flesch\ndatap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("fre_dc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Dale.Chall\ndatap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("fre_smog "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("SMOG\ndatap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("fre_cl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Coleman.Liau\ndatap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("fre_fucks "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" all_measures"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("Fucks\n\nhist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("datap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("V5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("$")]),t._v("fre_flesch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" xlim"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" breaks"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"FD"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nstd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" sd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sqrt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"保存-workspace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#保存-workspace"}},[t._v("#")]),t._v(" 保存 workspace")]),t._v(" "),a("div",{staticClass:"language-R extra-class"},[a("pre",{pre:!0,attrs:{class:"language-r"}},[a("code",[t._v("save.image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"workspace.RData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",[a("li",[a("a",{attrs:{href:"https://cran.r-project.org/web/packages/topicmodels/topicmodels.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("R topicmodels"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cran.r-project.org/web/packages/ldatuning/vignettes/topics.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("LDA topic number tuning"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);